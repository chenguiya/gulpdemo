define("js/ci_reglotters",["jquery"],function(e){"user strict";var t=e("jquery"),i={index:-1,count:0,timer:100,speed:20,times:0,cycle:50,prize:-1,init:function(e){t("#"+e).find(".reglot_unit").length>0&&($lottery=t("#"+e),$units=$lottery.find(".reglot_unit"),this.obj=$lottery,this.count=$units.length,$lottery.find(".reglot-unit-"+this.index).addClass("active"))},roll:function(){var e=this.index,i=this.count,r=this.obj;return t(r).find(".reglot-unit-"+e).removeClass("active"),e+=1,e>i-1&&(e=0),t(r).find(".reglot-unit-"+e).addClass("active"),this.index=e,!1},stop1:function(e){return this.prize=e,!1},open:function(e){t("#reglot_mask").show(),t("#reglot_mask .reglot_m_title div").html(e)},openu:function(e){t(".reglot_popmenu").show(),t(".reglot_popmenu .reglot_m_title div").html(e)}},r=!1;window.onload=function(){i.init("reglot_box"),t("#reglot_box a").click(function(){t.ajax({type:"GET",url:cid_url+"/api/lottery/do_lottery",dataType:"json",success:function(e){function t(){if(i.times+=1,i.roll(),i.times>i.cycle+10&&i.prize==i.index)clearTimeout(i.timer),i.open(e.message),i.prize=-1,i.times=0,r=!1;else{if(i.times<i.cycle)i.speed-=10;else if(i.times==i.cycle){Math.random()*i.count|0;i.prize=e.data}else i.times>i.cycle+10&&(0==i.prize&&7==i.index||i.prize==i.index+1)?i.speed+=110:i.speed+=20;i.speed<40&&(i.speed=40),i.timer=setTimeout(t,i.speed)}return!1}if(401===e.code)shellmodule.login(e.message);else if(203===e.code)i.openu(e.message);else{if(402!==e.code)return r?!1:(i.speed=100,t(),r=!0,!1);showmsg(e.message,"",1e3)}},error:function(){showmsg("返回异常")}})}),t(".reglog_btn_certain").click(function(){t(this).parents("#reglot_mask").hide(),window.location.reload()})},t(".reglog_btn_share").on("click",function(){var e,t,i,r,o,s,n=cid_url+"/static/images/reglot_table/share_20160309.jpg";for(i=n.length,t=0,e="";i>t;){if(r=255&n.charCodeAt(t++),t==i){e+=base64EncodeChars.charAt(r>>2),e+=base64EncodeChars.charAt((3&r)<<4),e+="==";break}if(o=n.charCodeAt(t++),t==i){e+=base64EncodeChars.charAt(r>>2),e+=base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),e+=base64EncodeChars.charAt((15&o)<<2),e+="=";break}s=n.charCodeAt(t++),e+=base64EncodeChars.charAt(r>>2),e+=base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),e+=base64EncodeChars.charAt((15&o)<<2|(192&s)>>6),e+=base64EncodeChars.charAt(63&s)}return shellmodule.ShareLottery(e),!1})});
!function(t){var i=function(n,e,h){if(this.parent=t("#"+n),this.body=t("body"),this.parent.length<=0)return!1;if(this.options=t.extend({},i.options,e),"object"!=typeof h)return!1;this.data=h||{},this.reset();var o=this;t(window).resize(function(){o.reset()})};i.prototype={reset:function(i){"object"==typeof i&&t.extend(this.options,i),parseInt(this.body.outerWidth())>1800||-1!==navigator.userAgent.indexOf("iPad")?(this.options.width=1900,this.minwidth=862,this.minheight=610,this.preLeft=240,this.nheight=862):parseInt(this.body.outerWidth())>1399||-1!==navigator.userAgent.indexOf("iPad")?(this.options.width=1400,this.options.height=490,this.options.maxwidth=693,this.options.maxheight=490,this.minwidth=614,this.minheight=434,this.preLeft=176):parseInt(this.body.outerWidth())>1300||-1!==navigator.userAgent.indexOf("iPad")?(this.options.width=1340,this.options.height=434,this.options.maxwidth=614,this.options.maxheight=434,this.minwidth=534,this.minheight=378,this.preLeft=181):(this.options.width=1e3,this.options.height=375,this.options.maxwidth=530,this.options.maxheight=375,this.minwidth=452,this.minheight=320,this.preLeft=117),this.total=this.data.length,this.pageNow=this.options.initPage,this.preNLeft=-530,this.nextNLeft=this.options.width,this.leftNav=this.preLeft+this.preLeft/2,this.margintop=28,this.nextLeft=this.options.width-this.minwidth-this.preLeft,this.nheight=this.options.width-this.minwidth,this.pageNowLeft=(this.options.width-this.options.maxwidth)/2,this.drawContent()},drawContent:function(){this.parent.empty(),this.parent.css({width:this.options.width+"px",height:this.options.height+"px",position:"relative"}),this.content=document.createElement("DIV"),this.content.className=this.options.className,this.content.cssText="width:"+this.options.width+"px;height:"+this.options.height+"px;cursor:move;position:absolute;",this.bottomNav=document.createElement("DIV"),this.bottomNav.className="bottomNav";for(var t=1;t<=this.total;t++){var i=document.createElement("DIV");i.className="bottomNavButtonOFF",t==this.pageNow&&(i.className="bottomNavButtonOFF bottomNavButtonON"),i.setAttribute("ref",t),this.bottomNav.appendChild(i)}this.content.appendChild(this.bottomNav),this.bannerControls='<div class="bannerControls"> <div class="leftNav" style="display: block; left:'+this.leftNav+'px"></div> <div class="rightNav" style="display: block;right:'+this.leftNav+'px"></div> </div>',this.content.innerHTML+=this.bannerControls,this.contentHolder=document.createElement("DIV"),this.contentHolder.style.width=this.options.width+"px",this.contentHolder.style.height=this.options.height+"px";for(var n=0,t=1,e=this.data.length;e>n;++n,++t){var h=document.createElement("DIV");h.className="contentHolderUnit",h.setAttribute("ref",t),h.setAttribute("id","contentHolderUnit"+t);var o='<a href="'+this.data[n].url+'" target="_blank" class="elementLink">';o+="</a>",o+='<img src="'+this.data[n].img+'" alt="'+this.data[n].title+'"/>',o+='<span class="elementOverlay"></span>',h.innerHTML=o,this.contentHolder.appendChild(h)}this.content.appendChild(this.contentHolder),this.parent.append(this.content),this.parent.css({overflow:"hidden"}),this.initContent(),this.bind(),this.start()},initContent:function(){contentHolderUnit=this.parent.find(".contentHolderUnit"),contentHolderUnit.css({width:this.minwidth,height:this.minheight,opacity:1,left:"0px",zIndex:0,marginTop:this.margintop}),this.parent.find(".contentHolderUnit .elementOverlay").css({opacity:.6}),this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+")").css({width:this.options.maxwidth,height:this.options.maxheight,opacity:1,left:this.pageNowLeft+"px",zIndex:3,marginTop:0}),this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+") .elementOverlay").css({opacity:0});var t=this.pageNow>1?this.pageNow-1:this.total,i=this.pageNow==this.total?1:this.pageNow+1,n=i+1>this.total?1:i+1;this.parent.find(".contentHolderUnit:nth-child("+t+")").css({opacity:1,left:this.preLeft+"px",height:this.minheight,width:this.minwidth,zIndex:1,marginTop:this.margintop}),this.parent.find(".contentHolderUnit:nth-child("+i+")").css({opacity:1,left:this.nextLeft+"px",height:this.minheight,width:this.minwidth,zIndex:1,marginTop:this.margintop}),this.parent.find(".contentHolderUnit:nth-child("+n+")").css({opacity:1,left:this.nheight+"px",height:this.minheight,width:this.minwidth,marginTop:this.margintop})},bind:function(){this.leftNav=this.parent.find(".leftNav"),this.rightNav=this.parent.find(".rightNav"),this.bottonNav=this.parent.find(".bottomNavButtonOFF"),this.lists=this.parent.find(".contentHolderUnit");var t=this;this.parent.mouseover(function(){t.stop(),t.leftNav.show(),t.rightNav.show()}),this.parent.mouseout(function(){t.start()}),t.leftNav.click(function(){t.turn("right")}),t.rightNav.click(function(){t.turn("left")}),t.bottonNav.click(function(){var i=parseInt(this.getAttribute("ref"));if(t.pageNow==i)return!1;if(t.pageNow<i)var n=i-t.pageNow,e=t.pageNow+t.total-i;else var n=t.total-t.pageNow+i,e=t.pageNow-i;return n>e?dir="right":dir="left",t.turnpage(i,dir),!1}),t.lists.click(function(i){var n=parseInt(this.getAttribute("ref"));if(t.pageNow==n)return!0;if(i.preventDefault(),t.pageNow<n)var e=n-t.pageNow,h=t.pageNow+t.total-n;else var e=t.total-t.pageNow+n,h=t.pageNow-n;e>h?dir="right":dir="left",t.turnpage(n,dir)})},initBottomNav:function(){this.parent.find(".bottomNavButtonOFF").removeClass("bottomNavButtonON"),this.parent.find(".bottomNavButtonOFF:nth-child("+this.pageNow+")").addClass("bottomNavButtonON")},start:function(){var t=this;t.timerId&&t.stop(),t.timerId=setInterval(function(){"left"==t.options.direct?t.turn("left"):t.turn("right")},t.options.delay)},stop:function(){clearInterval(this.timerId)},turn:function(t){var i=this;if("right"==t){var n=i.pageNow-1;0>=n&&(n=i.total)}else{var n=i.pageNow+1;n>i.total&&(n=1)}i.turnpage(n,t)},turnpage:function(t,i){var n=this;if(n.locked)return!1;if(n.locked=!0,n.pageNow==t)return!1;var e=function(t,i,e){var h=t>1?t-1:n.total,o=t==n.total?1:t+1,a=h-1>=1?h-1:n.total,s=o+1>n.total?1:o+1;if(h!=n.pageNow&&o!=n.pageNow){var d=n.pageNow>1?n.pageNow-1:n.total,r=n.pageNow==n.total?1:n.pageNow+1;n.parent.find(".contentHolderUnit:nth-child("+d+")").animate({opacity:1,width:n.minwidth,height:n.minheight,left:n.nheight+"px",zIndex:0,marginTop:n.margintop},e),n.parent.find(".contentHolderUnit:nth-child("+n.pageNow+")").animate({width:n.minwidth,height:n.minheight,opacity:1,left:n.nheight+"px",zIndex:0,marginTop:n.margintop},e),n.parent.find(".contentHolderUnit:nth-child("+r+")").animate({width:n.minwidth,height:n.minheight,opacity:1,left:n.nheight+"px",zIndex:0,marginTop:n.margintop},e)}"left"==i?(n.parent.find(".contentHolderUnit .elementOverlay").css({opacity:.6}),n.parent.find(".contentHolderUnit:nth-child("+a+")").css({zIndex:1}),n.parent.find(".contentHolderUnit:nth-child("+a+")").animate({opacity:1,left:"0px",width:n.minwidth,height:n.minheight,zIndex:1,marginTop:n.margintop},e,"",function(){n.locked=!1}),n.parent.find(".contentHolderUnit:nth-child("+h+")").css({zIndex:2}),n.parent.find(".contentHolderUnit:nth-child("+h+")").animate({opacity:1,left:n.preLeft+"px",height:n.minheight,width:n.minwidth,zIndex:2,marginTop:n.margintop},e),n.parent.find(".contentHolderUnit:nth-child("+t+")").css({zIndex:3}),n.parent.find(".contentHolderUnit:nth-child("+t+")").animate({opacity:1,left:n.pageNowLeft+"px",height:n.options.maxheight,width:n.options.maxwidth,zIndex:3,marginTop:"0"},e),n.parent.find(".contentHolderUnit:nth-child("+t+") .elementOverlay").css({opacity:0}),n.parent.find(".contentHolderUnit:nth-child("+o+")").css({zIndex:2}),n.parent.find(".contentHolderUnit:nth-child("+o+")").animate({opacity:1,left:n.nextLeft+"px",height:n.minheight,width:n.minwidth,zIndex:2,marginTop:n.margintop},e),n.parent.find(".contentHolderUnit:nth-child("+s+")").css({zIndex:0}),n.parent.find(".contentHolderUnit:nth-child("+s+")").animate({opacity:1,zIndex:1,left:n.nheight+"px",height:n.minheight,width:n.minwidth,marginTop:n.margintop},e,"",function(){n.locked=!1})):(n.parent.find(".contentHolderUnit .elementOverlay").css({opacity:.6}),n.parent.find(".contentHolderUnit:nth-child("+a+")").css({zIndex:0}),n.parent.find(".contentHolderUnit:nth-child("+a+")").animate({width:n.minwidth,height:n.minheight,opacity:1,left:"0px",zIndex:0,marginTop:n.margintop},e,"",function(){n.locked=!1}),n.parent.find(".contentHolderUnit:nth-child("+h+")").css({zIndex:2}),n.parent.find(".contentHolderUnit:nth-child("+h+")").animate({opacity:1,left:n.preLeft+"px",height:n.minheight,width:n.minwidth,zIndex:2,marginTop:n.margintop},e),n.parent.find(".contentHolderUnit:nth-child("+t+")").css({zIndex:3}),n.parent.find(".contentHolderUnit:nth-child("+t+")").animate({opacity:1,left:n.pageNowLeft+"px",height:n.options.maxheight,width:n.options.maxwidth,zIndex:3,marginTop:"0px"},e),n.parent.find(".contentHolderUnit:nth-child("+t+") .elementOverlay").css({opacity:0}),n.parent.find(".contentHolderUnit:nth-child("+o+")").css({zIndex:2}),n.parent.find(".contentHolderUnit:nth-child("+o+")").animate({opacity:1,left:n.nextLeft+"px",height:n.minheight,width:n.minwidth,zIndex:2,marginTop:n.margintop},e),n.parent.find(".contentHolderUnit:nth-child("+s+")").css({zIndex:1}),n.parent.find(".contentHolderUnit:nth-child("+s+")").animate({width:n.minwidth,height:n.minheight,opacity:1,zIndex:1,left:n.nheight+"px",zIndex:0,marginTop:n.margintop},e,"",function(){n.locked=!1})),n.pageNow=t,n.initBottomNav()};e(t,i,n.options.speed)}},i.options={offsetPages:5,direct:"left",initPage:1,className:"posterTvGrid",autoWidth:!0,width:970,height:665,maxwidth:940,maxheight:665,delay:5e3,speed:500},window.posterTvGrid=i}(jQuery);
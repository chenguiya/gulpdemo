define("js/version3_album",["jquery","swiper"],function(t){"user strict";function s(t){for(;t&&"undefined"!=typeof t.originalEvent;)t=t.originalEvent;return t}var a=t("jquery"),i=(t("swiper"),a("#postalbumid").attr("data-tid"));a(".posta_ok").on("click",function(){var t=a(this).attr("data-url");return shellmodule.SaveImage(t),!1}),function(){function t(t,s,a,i){if(t[0]){s=s||1,a=a||0,i=i||0,t.css("-webkit-transform","scale("+s+")"),t.css("-moz-transform","scale("+s+")"),t.css("-o-transform","scale("+s+")"),t.css("transform","scale("+s+")");var o=t.parent(),e=(n?"translate3d":"translate")+"("+a*s+"px, "+i*s+"px"+(n?", 0px)":")");o.css("-webkit-transform",e),o.css("-moz-transform",e),o.css("-o-transform",e),o.css("transform",e)}}function o(s){var i=s.offset(),o=s.width()*g-m,e=s.height()*g-p;if(e>0){var n=i.top-a(".postalbum").offset().top;n>0?x-=n/g:n+s.height()*g-p<0&&(x-=(n+s.height()*g-p)/g)}else x=0;o>0?i.left>0?_-=i.left/g:i.left+s.width()*g-m<0&&(_-=(i.left+s.width()*g-m)/g):_=0,1>g&&(g=1),v=_,w=x,t(s,g,_,x)}function e(t){return a(".postalbum_c").css("-webkit-transform","translate3d("+t+"px, 0, 0)"),a(".postalbum_c").css("-moz-transform","translate3d("+t+"px, 0, 0)"),a(".postalbum_c").css("-o-transform","translate3d("+t+"px, 0, 0)"),a(".postalbum_c").css("transform","translate3d("+t+"px, 0, 0)"),!0}for(var n=("WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix),r=rentnum,c=a(".postalbum_c li").length,u=[],l=0;c>l;l++)u[l]=(new Image).src=a(".postalbum_c").find("img").eq(l).attr("zsrc");var m=document.body.clientWidth||window.innerWidth,p=document.documentElement.clientHeight;a(".postalbum").css({display:"block",height:p+"px"}),a(".postalbum_u").css({height:p+"px",width:m+"px"}),a(".postalbum_i").css({"max-height":"100%",visibility:"visible"}),n?(a(".postalbum_c").css({"line-height":p+"px",width:m*c+"px"}),e("-"+r*m)):(a(".postalbum_c").css({display:"block",height:p*c+"px"}),a(".postalbum_c").css({top:"-"+r*p+"px"}));var h={},f=!0,d=null;touchaction=function(t,a,i){t.on("touchstart",a,function(t){t=s(t),h.x1=t.touches[0].pageX,h.y1=t.touches[0].pageY,h.hori=!0,f=!0}).on("touchmove",a,function(t){f=!1,t=s(t),h.x2=t.touches[0].pageX,h.y2=t.touches[0].pageY,h.distx=h.x2-h.x1,h.disty=h.y2-h.y2,Math.abs(h.distx)<2*Math.abs(h.disty)?h.hori=!1:t.preventDefault()}).on("touchend",a,function(t){if(t=s(t),h.x2&&Math.abs(h.distx)>30&&h.hori&&!f){var a=h.distx>0?"right":"left";i.call(this,a,t)}else f&&(postalbum_touch_interval=(new Date).getTime(),d||(d=setTimeout(function(){var s=(new Date).getTime()-postalbum_touch_interval;s>=250&&i.call(this,"tap",t),postalbum_touch_interval=0,d=null},250)))})};var b=a("#img_"+r);b.css({"-webkit-transition":"all 200ms","-moz-transition":"all 200ms","-o-transition":"all 200ms",transition:"all 200ms"}),t(b,1,0,0),setTimeout(function(){o(b)},350);var g=1,_=0,x=0,v=0,w=0,y=!1,k=0,T=null,z={};a(".postalbum_u").on("touchstart",".postalbum_i",function(t){y&&(t=s(t),z.x1=t.touches[0].pageX,z.y1=t.touches[0].pageY)}).on("touchmove",".postalbum_i",function(i){y&&(i=s(i),z.x2=i.touches[0].pageX,z.y2=i.touches[0].pageY,z.distx=z.x2-z.x1,z.disty=z.y2-z.y1,v=z.distx/g+_,w=z.disty/g+x,t(a("#img_"+r),g,v,w))}).on("touchend",".postalbum_i",function(s){k=(new Date).getTime(),T||(T=setTimeout(function(){var s=(new Date).getTime()-k,i=a("#img_"+r);250>s?(g=1==g?2:1,y=1==g?!1:!0,y&&i.attr("src",i.attr("orig")),t(i,g,v,w),setTimeout(function(){o(i)},250)):y&&(_=v,x=w,o(i)),k=0,T=null},250))});touchaction(a(".postalbum"),".postalbum_u",function(t,s){if(!y)switch(t){case"left":if(r>=c-1)return!1;for(var o=0;3>o;o++)a("#img_"+(r+o)).attr("src")||a("#img_"+(r+o)).attr("src",a("#img_"+(r+o)).attr("zsrc"));a(".posta_ok").attr("data-url",u[r+1]),r++,n?e("-"+r*m):a(".postalbum_c").css({top:"-"+r*p+"px"}),a("#curpic").text(r+1);break;case"right":if(0>=r)return!1;for(var o=-3;0>o;o++)a("#img_"+(r+o)).attr("src")||a("#img_"+(r+o)).attr("src",a("#img_"+(r+o)).attr("zsrc"));a(".posta_ok").attr("data-url",u[r-1]),r--,n?e("-"+r*m):a(".postalbum_c").css({top:"-"+r*p+"px"}),a("#curpic").text(r+1);break;case"tap":a(".postalbum_h");isIOS?window.location.href="ios://NativeBack":isAndroid?window.Android.NativeBack():window.location.href=cid_url+"/api/show/?tid="+i}})}()});
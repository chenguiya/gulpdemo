define("js/ci_index",["jquery","swiper"],function(e){"user strict";var s=e("jquery"),a=new Object,t={init:function(){var e=this;s(".display").each(function(t,o){o=s(o);var i=s(o.attr("href"));i&&i.attr("display")&&(i.css({display:"none"}),i.css({"z-index":"10002"}),a[i.attr("id")]=i,o.on("click",function(a){return e.maskinit(),"true"==i.attr("display")&&(i.css("display","block"),i.attr("display","false"),s("#mask").css({display:"block",width:"100%",height:"100%",position:"fixed",top:"0",left:"0",background:"rgba(0,0,0,.4)","z-index":"10001"})),!1}))})},maskinit:function(){var e=this;s("#mask").off().on("click",function(){e.hide()})},hide:function(){s("#mask").css("display","none"),s.each(a,function(e,s){s.css("display","none"),s.attr("display","true")})}};if(s(".display").length>0&&t.init(),s("#act_rowLeft_id").length){var o=2,i=!0,d=!1;s(window).scroll(function(){s(document).height()-s(this).scrollTop()-s(this).height()<300&&(d&&(s("#J_loading").html("加载完毕"),s("#J_loading").show()),i=!0,s("#J_loading").show(),setTimeout(function(){i&&(s.getJSON(location.href,{page:o},function(e){201==e.code&&(s("#J_loading").html("加载完毕"),s("#J_loading").hide()),s("#J_loading").hide();for(var a=e.data.length,t=e.data,o=0;a>=o;o++){var i="<tr>";i+='<td class="one_t"><img src="'+t[o].avatar+'" alt="'+t[o].username+'" width="30" height="30" class="img_r">'+t[o].username+"</td>",i+='<td class="two_t">'+t[o].ufielddata.realname+"</td>",i+='<td class="one_t">--</td>',i+="</tr>",s("#act_rowLeft_id").append(i)}}),o++),i=!1},200))})}if(s("#J_loading").length){var o=2,i=!0,d=!1;s(window).scroll(function(){s(document).height()-s(this).scrollTop()-s(this).height()<300&&(d&&s("#J_loading").hide(),i=!0,isIOS?s("#J_loading").hide():s("#J_loading").show(),setTimeout(function(){i&&(s.getJSON(location.href,{page:o},function(e){201===e.code&&s("#J_loading").hide(),s("#J_loading").hide();for(var a=e.replylists.length,t=e.replylists,o=0;a>o;o++){var i='<div class="chtwo cl">';if(i+='<div class="viewhd webox">',i+='<div class="avatar_img"><a href="javascript:avatarBack('+t[o].authorid+')"><img src="'+t[o].avatar+'" class="img_noerror">',t[o].author_vip>0&&(i+='<span class="v_icon_vv">v</span>'),i+="</a></div>",i+='<div class="auth_wrap">',i+='<div class="authi_top">',i+=e.member_info.uid>0?2==e.member_info.isadmin||1==e.ismanager?"<a href=\"javascript:showWindow('rep_"+t[o].pid+"',"+t[o].pid+","+t[o].tid+","+t[o].authorid+","+e.fid+",'"+t[o].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showOrdinary('rep_"+t[o].pid+"',"+t[o].pid+","+t[o].tid+","+t[o].authorid+","+e.fid+",'"+t[o].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showReports('rep_"+t[o].pid+"',"+t[o].pid+","+t[o].tid+","+t[o].authorid+","+e.fid+",'"+t[o].author+'\');" rel="nofollow" class="look_at">...</a>',i+='<a href="javascript:void(0);" class="elecnation_dr"',t[o].author_vip>0&&(i+=' style="color:#eb6100"'),i+=">"+t[o].author,""!==t[o].author_hotfansclub_logo&&(i+='<img src="'+t[o].author_hotfansclub_logo+'" align="middle" style="border-radius: 50%; width: 16px; margin-left: 8px;">'),i+='</a><span class="lou_dr">'+t[o].new_position+"楼</span>",i+='<a href="javascript:void(0);" class="icon-zans paire_zg" data-url="'+cid_url+"/api/misc/like?pid="+t[o].pid+"&tid"+t[o].tid+"&authorid="+t[o].authorid+"&fid="+e.fid+"&uid="+e.member_info.uid+'"><em>'+t[o].support+"</em></a>",i+="</div>",i+='<div class="authi_p"><span>'+t[o].dateline+"</span></div>",i+='<div class="message">'+t[o].message+"</div>",t[o].reply.length){var d=t[o].reply,n=d.length;i+='<div class="reply_cont">';for(var r=0;n>r;r++)i+='<p class="rep_nor">'+d[r].author+"："+d[r].message+"</p>";i+="</div>"}i+="</div></div>",i+="</div>",s("#colume_listid").append(i)}}),o++),i=!1},200))})}if(s("#zan_btnGod").length&&s("#zan_btnGod").on("click",function(){var e=s(this);return s.ajax({type:"GET",url:e.attr("data-url"),dataType:"json",success:function(s){s?401===s.code?shellmodule.login(s.message):404===s.code?showmsg(s.message):409===s.code?showmsg(s.message):406===s.code?showmsg(s.message):200===s.code?(e.addClass("icon_o"),e.find("em").text(parseInt(e.find("em").text())+1),s.data.gold&&showmsg(s.message+"+"+s.data.gold+"金币")):showmsg("请稍后再试！"):showmsg("数据有误！")},error:function(){showmsg("出错了，请稍后再试!")}}),!1}),s(".colume").length&&s(".paire_zg").on("click",function(){var e=s(this);return s.ajax({type:"GET",url:s(this).attr("data-url"),dataType:"json",success:function(s){s&&(401===s.code?shellmodule.login(s.message):409===s.code?showmsg(s.message):406===s.code?showmsg(s.message):200===s.code?(e.addClass("zans-hover"),e.find("em").text(parseInt(e.find("em").text())+1),s.data.gold&&showmsg(s.message+"+"+s.data.gold+"金币")):showmsg("数据读取错误！"))},error:function(){showmsg("出错了，请稍后再试")}}),!1}),s(".elecnation_fastpost").length){var n=s("#fastpostform");s("#fastpostsubmit").on("click",function(e){var a=s("#fastpostmessage");"说一句"==a.val()&&a.attr("value","");var t={fid:s("#fid").val(),tid:s("#tid").val(),mytype:s("#mytype").val(),message:a.val()};return s.ajax({type:"POST",url:n.attr("action"),data:t,dataType:"json",success:function(e){if(e)if(401===e.code)shellmodule.login(e.message);else if(402===e.code)showmsg(e.message);else if(403===e.code)showmsg(e.message);else if(408===e.code)showmsg(e.message);else if(200===e.code){s("#colume_listid").prepend(e.data.html),s("#fastpostmessage").val(""),s("#columeyr").find("span").text(parseInt(s("#columeyr").find("span").text())+1),showmsg(e.message);var a=s("#columeyr").offset().top;scrollTo(0,a)}else 404===e.code&&showmsg(e.message)},error:function(){showmsg("出错了，请稍后再试")}}),e.preventDefault(),!1})}if(s("#stickIdno").length&&s("#stickIdno").on("click",function(){var e=(s(this),s(this).attr("data-fid")),a=s(this).attr("data-tid");return s.ajax({type:"GET",url:cid_url+"/api/misc/stick",data:{fid:e,tid:a},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):404===e.code?showmsg(e.message):405===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),isIOS?window.location.href="ios://NativeThreadUpdate":isAndroid&&window.Android.NativeThreadUpdate()):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){s(".nav-overlay").hide(),s("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),s("#reportId").length&&s("#reportId").on("click",function(){var e=(s(this),s(this).attr("data-fid")),a=s(this).attr("data-tid"),t=s(this).attr("data-author"),o=s(this).attr("data-authorid"),i=s(this).attr("data-pid");return s.ajax({type:"GET",url:cid_url+"/api/misc/report",data:{fid:e,tid:a,author:t,authorid:o,pid:i,type:"thread"},dataType:"json",success:function(e){e?404===e.code?(showmsg(e.message,"",1e3),window.location.reload()):200===e.code?(showmsg(e.message,"",1e3),window.location.reload()):showmsg("请稍后再试"):showmsg("数据有误")},error:function(){showmsg("出错了，请稍候再试")}}),!1}),s("#deleteId").length&&s("#deleteId").on("click",function(){var e=(s(this),s(this).attr("data-fid")),a=s(this).attr("data-pid"),t=s(this).attr("data-tid"),o=s(this).attr("data-authorid");return s.ajax({type:"GET",url:cid_url+"/api/feed_manage/delete",data:{fid:e,pid:a,tid:t,authorid:o,type:"feed"},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):404===e.code?showmsg(e.message,"",1e3):402===e.code?showmsg(e.message,"",1e3):200===e.code?(showmsg(e.message,"",1e3),isIOS?(window.location.href="ios://NativeThreadUpdate",setTimeout(function(){window.location.href="ios://NativeBack"},1500)):isAndroid?setTimeout(function(){window.Android.NativeThreadUpdate(),window.Android.NativeBack()},1500):window.location.href=cid_url+"/home/gold_task"):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){s(".nav-overlay").hide(),s("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),s("#postsubreplay").length){var r=s("#replyform");s("#postsubreplay").on("click",function(e){var a=s("#replymessage"),t=s("#replytid").val();return s.ajax({type:"POST",url:r.attr("action"),data:{fid:s("#replyfid").val(),tid:t,parentid:s("#replayparenttid").val(),message:a.val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):403===e.code?showmsg(e.message):404===e.code?showmsg(e.message):408===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),a.val(""),isIOS?window.location.href="ios://NativeBackAndReload":isAndroid?window.Android.NativeBackAndReload():window.location.href=cid_url+"/api/show?tid="+t):showmsg("请稍后再试"):showmsg("有误，请稍后再试")},error:function(){showmsg("出错了，请稍后再试")}}),e.preventDefault(),!1})}if(s("#act_chact").length){var l=s("#activityform");s("#activitysubmit").on("click",function(e){s("#tid").val();return""==s("#name").val()||""==s("#phones").val()?showmsg("请完善你的姓名和手机号"):s.ajax({type:"POST",url:l.attr("action"),data:{tid:s("#tid").val(),name:s("#name").val(),phones:s("#phones").val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):405===e.code?showmsg(e.message):404===e.code?showmsg(e.message):200===e.code?s("#ispay").length?window.location.reload():(showmsg(e.message,"",1e3),setTimeout(function(){window.location.reload()},1500)):showmsg("稍后再试"):showmsg("出错了请稍候再试")},error:function(){showmsg("请稍候再试")}}),e.preventDefault(),!1}),s("#sub_resetid").on("click",function(e){return t.hide(),e.preventDefault(),!1})}if((s("#thread_imgid").length||s(".thread_imgs").length)&&s(".Photoidurl").on("click",function(){var e=s("#thread_imgid").attr("data-tid"),a=s(this).attr("id");window.location.href=cid_url+"/api/show/photos?tid="+e+"&id="+a}),s("#sin_noid").length&&s("#sin_noid").on("click",function(){var e=(s(this),s(this).attr("data-tid"));return s.ajax({type:"GET",url:cid_url+"/fansclub/activity/sign_in?tid="+e,dataType:"json",success:function(s){s?401===s.code?shellmodule.login(s.message):402===s.code?showmsg(s.message):405===s.code?showmsg(s.message):406===s.code?showmsg(s.message):407===s.code?showmsg(s.message):404===s.code?showmsg(s.message):200===s.code?(showmsg(s.message,"",1e3),setTimeout(function(){window.location.href=cid_url+"/api/show?tid="+e},1500)):showmsg("数据错误"):showmsg("请稍候再试")},error:function(){showmsg("数据有误，请稍候再试！")}}),!1}),s(".thread_mess").length){var c=s(".thread_mess").html(),h=/(http:\/\/|https:\/\/|www)((\w|=|\?|\.|\/|&|-)+)/g,m=/http:\/\/|https:\/\//g,g=s(".thread_mess img").attr("src"),u=s(".thread_mess a").attr("href"),p=s("#qiniu_video").html();h.exec(g)||h.exec(u)||h.exec(p)||(c=m.exec(c)?c.replace(h,"<a href='$1$2'>$1$2</a>"):c.replace(h,"<a href='http://$1$2'>$1$2</a>")),document.getElementById("thread_imgid").innerHTML=c}s(".topic_name").length&&s(".topic_name").on("click",function(){var e=s(this).attr("value");return shellmodule.showtopic(e),!1}),s("img.img_noerror").on("error",function(){var e=event.srcElement;e.src=cid_url+"/static/images/nopic.png",e.onerror=null})});
define("js/ci_index",["jquery","swiper"],function(e){"user strict";function s(e){"INPUT"==document.activeElement.nodeName?e.css({position:"static",bottom:"auto","margin-top":"-53px"}):(e.css({position:"fixed",bottom:"0"}),window.res&&(clearInterval(window.res),window.res=null))}var o=e("jquery"),t=new Object,i={init:function(){var e=this;o(".display").each(function(s,i){i=o(i);var a=o(i.attr("href"));a&&a.attr("display")&&(a.css({display:"none"}),a.css({"z-index":"10002"}),t[a.attr("id")]=a,i.on("click",function(s){return e.maskinit(),"true"==a.attr("display")&&(a.css("display","block"),a.attr("display","false"),o("#mask").css({display:"block",width:"100%",height:"100%",position:"fixed",top:"0",left:"0",background:"rgba(0,0,0,.4)","z-index":"10001"})),!1}))})},maskinit:function(){var e=this;o("#mask").off().on("click",function(){e.hide()})},hide:function(){o("#mask").css("display","none"),o.each(t,function(e,s){s.css("display","none"),s.attr("display","true")})}};if(o(".display").length>0&&i.init(),o("#act_rowLeft_id").length){var a=2,n=!0,d=!1;o(window).scroll(function(){o(document).height()-o(this).scrollTop()-o(this).height()<300&&(d&&(o("#J_loading").html("加载完毕"),o("#J_loading").show()),n=!0,o("#J_loading").show(),setTimeout(function(){n&&(o.getJSON(location.href,{page:a},function(e){201==e.code&&(o("#J_loading").html("加载完毕"),o("#J_loading").hide()),o("#J_loading").hide();for(var s=e.data.length,t=e.data,i=0;s>=i;i++){var a="<tr>";a+='<td class="one_t"><img src="'+t[i].avatar+'" alt="'+t[i].username+'" width="30" height="30" class="img_r">'+t[i].username+"</td>",a+='<td class="two_t">'+t[i].ufielddata.realname+"</td>",a+='<td class="one_t">--</td>',a+="</tr>",o("#act_rowLeft_id").append(a)}}),a++),n=!1},200))})}if(o("#zan_btnGod").length&&o("#zan_btnGod").on("click",function(){var e=o(this);return o.ajax({type:"GET",url:e.attr("data-url"),dataType:"json",success:function(s){s?401===s.code?/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?(showmsg(s.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):/(Android)/i.test(navigator.userAgent)?(showmsg(s.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(s.message):404===s.code?showmsg(s.message):409===s.code?showmsg(s.message):406===s.code?showmsg(s.message):200===s.code?(e.addClass("icon_o"),e.find("em").text(parseInt(e.find("em").text())+1),s.data.gold&&showmsg(s.message+"+"+s.data.gold+"金币")):showmsg("请稍后再试！"):showmsg("数据有误！")},error:function(){showmsg("出错了，请稍后再试!")}}),!1}),o(".colume").length&&o(".paire_zg").on("click",function(){var e=o(this);return o.ajax({type:"GET",url:o(this).attr("data-url"),dataType:"json",success:function(s){s&&(401===s.code?/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?(showmsg(s.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):/(Android)/i.test(navigator.userAgent)?(showmsg(s.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(s.message):409===s.code?showmsg(s.message):406===s.code?showmsg(s.message):200===s.code?(e.addClass("zans-hover"),e.find("em").text(parseInt(e.find("em").text())+1),s.data.gold&&showmsg(s.message+"+"+s.data.gold+"金币")):showmsg("数据读取错误！"))},error:function(){showmsg("出错了，请稍后再试")}}),!1}),o(".elecnation_fastpost").length){var r=o("#fastpostform");o("#fastpostsubmit").on("click",function(e){var s=o("#fastpostmessage");"说一句"==s.val()&&s.attr("value","");var t={fid:o("#fid").val(),tid:o("#tid").val(),message:s.val()};return o.ajax({type:"POST",url:r.attr("action"),data:t,dataType:"json",success:function(e){if(e)if(401===e.code)isIOS?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):isAndroid?(showmsg(e.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(e.message);else if(402===e.code)showmsg(e.message);else if(403===e.code)showmsg(e.message);else if(408===e.code)showmsg(e.message);else if(200===e.code){o("#colume_listid").prepend(e.data.html),o("#fastpostmessage").val(""),o("#columeyr").find("span").text(parseInt(o("#columeyr").find("span").text())+1),showmsg(e.message);var s=o("#columeyr").offset().top;scrollTo(0,s)}else 404===e.code&&showmsg(e.message)},error:function(){showmsg("出错了，请稍后再试")}}),e.preventDefault(),!1})}if(o("#stickIdno").length&&o("#stickIdno").on("click",function(){var e=(o(this),o(this).attr("data-fid")),s=o(this).attr("data-tid");return o.ajax({type:"GET",url:cid_url+"/api/misc/stick",data:{fid:e,tid:s},dataType:"json",success:function(e){e?401===e.code?isIOS?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):isAndroid?(showmsg(e.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(e.message,"",1e3):402===e.code?showmsg(e.message):404===e.code?showmsg(e.message):405===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),isIOS?window.location.href="ios://NativeThreadUpdate":isAndroid&&window.Android.NativeThreadUpdate()):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){o(".nav-overlay").hide(),o("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),o("#reportId").length&&o("#reportId").on("click",function(){var e=(o(this),o(this).attr("data-fid")),s=o(this).attr("data-tid"),t=o(this).attr("data-author"),i=o(this).attr("data-authorid"),a=o(this).attr("data-pid");return o.ajax({type:"GET",url:cid_url+"/api/misc/report",data:{fid:e,tid:s,author:t,authorid:i,pid:a,type:"thread"},dataType:"json",success:function(e){e?404===e.code?(showmsg(e.message,"",1e3),window.location.reload()):200===e.code?(showmsg(e.message,"",1e3),window.location.reload()):showmsg("请稍后再试"):showmsg("数据有误")},error:function(){showmsg("出错了，请稍候再试")}}),!1}),o("#deleteId").length&&o("#deleteId").on("click",function(){var e=(o(this),o(this).attr("data-fid")),s=o(this).attr("data-pid"),t=o(this).attr("data-tid"),i=o(this).attr("data-authorid");return o.ajax({type:"GET",url:cid_url+"/api/feed_manage/delete",data:{fid:e,pid:s,tid:t,authorid:i,type:"feed"},dataType:"json",success:function(e){e?401===e.code?isIOS?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):isAndroid?(showmsg(e.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(e.message,"",1e3):404===e.code?showmsg(e.message,"",1e3):402===e.code?showmsg(e.message,"",1e3):200===e.code?(showmsg(e.message,"",1e3),isIOS?setTimeout(function(){window.location.href="iOS://NativeThreadUpdate",window.location.href="ios://NativeBack"},1500):isAndroid?setTimeout(function(){window.Android.NativeThreadUpdate(),window.Android.NativeBack()},1500):window.location.href=cid_url+"/home/gold_task"):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){o(".nav-overlay").hide(),o("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),o("#postsubreplay").length){var c=o("#replyform");o("#postsubreplay").on("click",function(e){var s=o("#replymessage"),t=o("#replytid").val();return o.ajax({type:"POST",url:c.attr("action"),data:{fid:o("#replyfid").val(),tid:t,parentid:o("#replayparenttid").val(),message:s.val()},dataType:"json",success:function(e){e?401===e.code?isIOS?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):isAndroid?(showmsg(e.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(e.message):402===e.code?showmsg(e.message):403===e.code?showmsg(e.message):404===e.code?showmsg(e.message):408===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),s.val(""),isIOS?window.location.href="ios://NativeBackAndReload":isAndroid?window.Android.NativeBackAndReload():window.location.href=cid_url+"/api/show?tid="+t):showmsg("请稍后再试"):showmsg("有误，请稍后再试")},error:function(){showmsg("出错了，请稍后再试")}}),e.preventDefault(),!1})}if(o("#act_chact").length){var m=o("#activityform");o("#activitysubmit").on("click",function(e){o("#tid").val();return""==o("#name").val()||""==o("#phones").val()?showmsg("请完善你的姓名和手机号"):o.ajax({type:"POST",url:m.attr("action"),data:{tid:o("#tid").val(),name:o("#name").val(),phones:o("#phones").val()},dataType:"json",success:function(e){e?401===e.code?isIOS?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):isAndroid?(showmsg(e.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(e.message):405===e.code?showmsg(e.message):404===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.reload()},1500)):showmsg("稍后再试"):showmsg("出错了请稍候再试")},error:function(){showmsg("请稍候再试")}}),e.preventDefault(),!1}),o("#sub_resetid").on("click",function(e){return i.hide(),e.preventDefault(),!1})}if(o("#thread_imgid").length&&o(".Photoidurl").on("click",function(){var e=o("#thread_imgid").attr("data-tid"),s=o(this).attr("id");window.location.href=cid_url+"/api/show/photos?tid="+e+"&id="+s}),o("#sin_noid").length&&o("#sin_noid").on("click",function(){var e=(o(this),o(this).attr("data-tid"));return o.ajax({type:"GET",url:cid_url+"/fansclub/activity/sign_in?tid="+e,dataType:"json",success:function(e){e?401===e.code?isIOS?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.href="ios://NativeLogin"},1500)):isAndroid?(showmsg(e.message,"",1e3),setTimeout(function(){window.Android.NativeLogin()},1500)):showmsg(e.message):402===e.code?showmsg(e.message):405===e.code?showmsg(e.message):406===e.code?showmsg(e.message):407===e.code?showmsg(e.message):404===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),setTimeout(function(){window.location.reload()},1500)):showmsg("数据有误"):showmsg("请稍候再试")},error:function(){showmsg("有误，请稍候再试！")}}),!1}),o(".thread_mess").length){var g=o(".thread_mess").text(),h=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g;g=g.replace(h,"<a href='$1$2'>$1$2</a>"),document.getElementById("thread_imgid").innerHTML=g}if(o("img.img_noerror").on("error",function(){var e=event.srcElement;e.src=cid_url+"/static/images/nopic.png",e.onerror=null}),o(".fast_postwap").length&&isIOS){window.res=null;o(".fast_postwap input").focus(function(){window.res||(s(o(".fast_postwap")),window.res=setInterval(function(){s(o(".fast_postwap"))},500))})}});
define("js/ci_indextest",["jquery","swiper"],function(e){"user strict";function t(){a.ajax({type:"GET",url:location.href,data:{page:i},dataType:"json",success:function(e){a("#J_loading").hide();for(var t=e.replylists.length,s=e.replylists,o=0;t>o;o++){var i='<div class="chtwo cl">';if(i+='<div class="viewhd webox">',i+='<div class="avatar_img"><a href="javascript:avatarBack('+s[o].authorid+')"><img src="'+s[o].avatar+'" class="img_noerror">',s[o].author_vip>0&&(i+='<span class="v_icon_vv">v</span>'),i+="</a></div>",i+='<div class="auth_wrap">',i+='<div class="authi_top">',i+=e.member_info.uid>0?2==e.member_info.isadmin||1==e.ismanager?"<a href=\"javascript:showWindow('rep_"+s[o].pid+"',"+s[o].pid+","+s[o].tid+","+s[o].authorid+","+e.fid+",'"+s[o].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showOrdinary('rep_"+s[o].pid+"',"+s[o].pid+","+s[o].tid+","+s[o].authorid+","+e.fid+",'"+s[o].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showReports('rep_"+s[o].pid+"',"+s[o].pid+","+s[o].tid+","+s[o].authorid+","+e.fid+",'"+s[o].author+'\');" rel="nofollow" class="look_at">...</a>',i+='<a href="javascript:void(0);" class="elecnation_dr"',s[o].author_vip>0&&(i+=' style="color:#eb6100"'),i+=">"+s[o].author,""!==s[o].author_hotfansclub_logo&&(i+='<img src="'+s[o].author_hotfansclub_logo+'" align="middle" style="border-radius: 50%; width: 16px; margin-left: 8px;">'),i+='</a><span class="lou_dr">'+s[o].new_position+"楼</span>",i+='<a href="javascript:void(0);" class="icon-zans paire_zg" data-url="'+cid_url+"/api/misc/like?pid="+s[o].pid+"&tid"+s[o].tid+"&authorid="+s[o].authorid+"&fid="+e.fid+"&uid="+e.member_info.uid+'"><em>'+s[o].support+"</em></a>",i+="</div>",i+='<div class="authi_p"><span>'+s[o].dateline+"</span></div>",i+='<div class="message">'+s[o].message+"</div>",s[o].reply.length){var d=s[o].reply,n=d.length;i+='<div class="reply_cont">';for(var r=0;n>r;r++)i+='<p class="rep_nor">'+d[r].author+"："+d[r].message+"</p>";i+="</div>"}i+="</div></div>",i+="</div>",a("#colume_listid").append(i)}},error:function(){showmsg("数据获取失败")}})}var a=e("jquery"),s=new Object,o={init:function(){var e=this;a(".display").each(function(t,o){o=a(o);var i=a(o.attr("href"));i&&i.attr("display")&&(i.css({display:"none"}),i.css({"z-index":"10002"}),s[i.attr("id")]=i,o.on("click",function(t){return e.maskinit(),"true"==i.attr("display")&&(i.css("display","block"),i.attr("display","false"),a("#mask").css({display:"block",width:"100%",height:"100%",position:"fixed",top:"0",left:"0",background:"rgba(0,0,0,.4)","z-index":"10001"})),!1}))})},maskinit:function(){var e=this;a("#mask").off().on("click",function(){e.hide()})},hide:function(){a("#mask").css("display","none"),a.each(s,function(e,t){t.css("display","none"),t.attr("display","true")})}};if(a(".display").length>0&&o.init(),a("#act_rowLeft_id").length){var i=2,d=!0,n=!1;a(window).scroll(function(){a(document).height()-a(this).scrollTop()-a(this).height()<300&&(n&&(a("#J_loading").html("加载完毕"),a("#J_loading").show()),d=!0,a("#J_loading").show(),setTimeout(function(){d&&(a.getJSON(location.href,{page:i},function(e){201==e.code&&(a("#J_loading").html("加载完毕"),a("#J_loading").hide()),a("#J_loading").hide();for(var t=e.data.length,s=e.data,o=0;t>=o;o++){var i="<tr>";i+='<td class="one_t"><img src="'+s[o].avatar+'" alt="'+s[o].username+'" width="30" height="30" class="img_r">'+s[o].username+"</td>",i+='<td class="two_t">'+s[o].ufielddata.realname+"</td>",i+='<td class="one_t">--</td>',i+="</tr>",a("#act_rowLeft_id").append(i)}}),i++),d=!1},200))})}if(document.getElementById("J_loading")){var i=2,d=!0,n=!1,r=parseInt(a("#J_loading").attr("totalpage"));a(window).scroll(function(){a(document).height()-a(this).scrollTop()-a(this).height()<200&&document.getElementById("J_loading")&&(d=!0,document.getElementById("J_loading").style.display="block",setTimeout(function(){d&&(t(),i++,i==r+1&&a("#J_loading").remove()),d=!1},1e3))})}if(a("#zan_btnGod").length&&a("#zan_btnGod").on("click",function(){var e=a(this);return a.ajax({type:"GET",url:e.attr("data-url"),dataType:"json",success:function(t){t?401===t.code?shellmodule.login(t.message):404===t.code?showmsg(t.message):409===t.code?showmsg(t.message):406===t.code?showmsg(t.message):200===t.code?(e.addClass("icon_o"),e.find("em").text(parseInt(e.find("em").text())+1),t.data.gold&&showmsg(t.message+"+"+t.data.gold+"金币")):showmsg("请稍后再试！"):showmsg("数据有误！")},error:function(){showmsg("出错了，请稍后再试!")}}),!1}),a(".colume").length&&a(".paire_zg").on("click",function(){var e=a(this);return a.ajax({type:"GET",url:a(this).attr("data-url"),dataType:"json",success:function(t){t&&(401===t.code?shellmodule.login(t.message):409===t.code?showmsg(t.message):406===t.code?showmsg(t.message):200===t.code?(e.addClass("zans-hover"),e.find("em").text(parseInt(e.find("em").text())+1),t.data.gold&&showmsg(t.message+"+"+t.data.gold+"金币")):showmsg("数据读取错误！"))},error:function(){showmsg("出错了，请稍后再试")}}),!1}),a("#fastEmoteArea").length){var l=a("#fastEmoteArea").attr("data-name");a("#fastEmoteArea li").on("click",function(e){var t=a(this).attr("data-id");return shellmodule.ShowReply(0,l,t),e.preventDefault(),!1})}if(a("#stickIdno").length&&a("#stickIdno").on("click",function(){var e=(a(this),a(this).attr("data-fid")),t=a(this).attr("data-tid");return a.ajax({type:"GET",url:cid_url+"/api/misc/stick",data:{fid:e,tid:t},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):404===e.code?showmsg(e.message):405===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),isIOS?window.location.href="ios://NativeThreadUpdate":isAndroid&&window.Android.NativeThreadUpdate()):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){a(".nav-overlay").hide(),a("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),a("#reportId").length&&a("#reportId").on("click",function(){var e=(a(this),a(this).attr("data-fid")),t=a(this).attr("data-tid"),s=a(this).attr("data-author"),o=a(this).attr("data-authorid"),i=a(this).attr("data-pid");return a.ajax({type:"GET",url:cid_url+"/api/misc/report",data:{fid:e,tid:t,author:s,authorid:o,pid:i,type:"thread"},dataType:"json",success:function(e){e?404===e.code?(showmsg(e.message,"",1e3),window.location.reload()):200===e.code?(showmsg(e.message,"",1e3),window.location.reload()):showmsg("请稍后再试"):showmsg("数据有误")},error:function(){showmsg("出错了，请稍候再试")}}),!1}),a("#deleteId").length&&a("#deleteId").on("click",function(){var e=(a(this),a(this).attr("data-fid")),t=a(this).attr("data-pid"),s=a(this).attr("data-tid"),o=a(this).attr("data-authorid");return a.ajax({type:"GET",url:cid_url+"/api/feed_manage/delete",data:{fid:e,pid:t,tid:s,authorid:o,type:"feed"},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):404===e.code?showmsg(e.message,"",1e3):402===e.code?showmsg(e.message,"",1e3):200===e.code?(showmsg(e.message,"",1e3),isIOS?(window.location.href="ios://NativeThreadUpdate",setTimeout(function(){window.location.href="ios://NativeBack"},1500)):isAndroid?setTimeout(function(){window.Android.NativeThreadUpdate(),window.Android.NativeBack()},1500):window.location.href=cid_url+"/home/gold_task"):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){a(".nav-overlay").hide(),a("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),a("#postsubreplay").length){var c=a("#replyform");a("#postsubreplay").on("click",function(e){var t=a("#replymessage"),s=a("#replytid").val();return a.ajax({type:"POST",url:c.attr("action"),data:{fid:a("#replyfid").val(),tid:s,parentid:a("#replayparenttid").val(),message:t.val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):403===e.code?showmsg(e.message):404===e.code?showmsg(e.message):408===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),t.val(""),isIOS?window.location.href="ios://NativeBackAndReload":isAndroid?window.Android.NativeBackAndReload():window.location.href=cid_url+"/api/show?tid="+s):showmsg("请稍后再试"):showmsg("有误，请稍后再试")},error:function(){showmsg("出错了，请稍后再试")}}),e.preventDefault(),!1})}if(a("#act_chact").length){var h=a("#activityform");a("#activitysubmit").on("click",function(e){a("#tid").val();return""==a("#name").val()||""==a("#phones").val()?showmsg("请完善你的姓名和手机号"):a.ajax({type:"POST",url:h.attr("action"),data:{tid:a("#tid").val(),name:a("#name").val(),phones:a("#phones").val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):405===e.code?showmsg(e.message):404===e.code?showmsg(e.message):200===e.code?a("#ispay").length?window.location.reload():(showmsg(e.message,"",1e3),setTimeout(function(){window.location.reload()},1500)):showmsg("稍后再试"):showmsg("出错了请稍候再试")},error:function(){showmsg("请稍候再试")}}),e.preventDefault(),!1}),a("#sub_resetid").on("click",function(e){return o.hide(),e.preventDefault(),!1})}if(a("#tagLabel").length&&(a("#tagLabel a").click(function(){return a("#tagsLandID").show(),!1}),a("#tagsClosed").click(function(){return a("#tagsLandID").hide(),!1})),(a("#thread_imgid").length||a(".thread_imgs").length)&&a(".Photoidurl").on("click",function(){var e=a("#thread_imgid").attr("data-tid"),t=a(this).attr("id");isIOS?window.location.href=cid_url+"/api/version3/show/photos?tid="+e+"&id="+t:window.location.href=cid_url+"/api/show/photos?tid="+e+"&id="+t}),a("#sin_noid").length&&a("#sin_noid").on("click",function(){var e=(a(this),a(this).attr("data-tid"));return a.ajax({type:"GET",url:cid_url+"/fansclub/activity/sign_in?tid="+e,dataType:"json",success:function(t){t?401===t.code?shellmodule.login(t.message):402===t.code?showmsg(t.message):405===t.code?showmsg(t.message):406===t.code?showmsg(t.message):407===t.code?showmsg(t.message):404===t.code?showmsg(t.message):200===t.code?(showmsg(t.message,"",1e3),setTimeout(function(){window.location.href=cid_url+"/api/version3/show?tid="+e},1500)):showmsg("数据错误"):showmsg("请稍候再试")},error:function(){showmsg("数据有误，请稍候再试！")}}),!1}),a(".thread_mess").length){var m=a(".thread_mess").html(),g=/(http:\/\/|https:\/\/|www)((\w|=|\?|\.|\/|&|-)+)/g,u=/http:\/\/|https:\/\//g,p=a(".thread_mess img").attr("src"),f=a(".thread_mess a").attr("href"),w=a("#qiniu_video").html();g.exec(p)||g.exec(f)||g.exec(w)||(m=u.exec(m)?m.replace(g,"<a href='$1$2'>$1$2</a>"):m.replace(g,"<a href='http://$1$2'>$1$2</a>"),document.getElementById("thread_imgid").innerHTML=m)}a(".topic_name").length&&a(".topic_name").on("click",function(){var e=a(this).attr("data-name");return shellmodule.ShowTopicName(e),!1}),a("img.img_noerror").on("error",function(){var e=event.srcElement;e.src=cid_url+"/static/images/nopic.png",e.onerror=null})});
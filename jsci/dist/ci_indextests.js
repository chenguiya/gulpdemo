define("js/ci_indextest",["jquery","swiper"],function(e){"user strict";var a=e("jquery"),t=new Object,s={init:function(){var e=this;a(".display").each(function(s,i){i=a(i);var o=a(i.attr("href"));o&&o.attr("display")&&(o.css({display:"none"}),o.css({"z-index":"10002"}),t[o.attr("id")]=o,i.on("click",function(t){return e.maskinit(),"true"==o.attr("display")&&(o.css("display","block"),o.attr("display","false"),a("#mask").css({display:"block",width:"100%",height:"100%",position:"fixed",top:"0",left:"0",background:"rgba(0,0,0,.4)","z-index":"10001"})),!1}))})},maskinit:function(){var e=this;a("#mask").off().on("click",function(){e.hide()})},hide:function(){a("#mask").css("display","none"),a.each(t,function(e,a){a.css("display","none"),a.attr("display","true")})}};if(a(".display").length>0&&s.init(),a("#act_rowLeft_id").length){var i=2,o=!0,d=!1;a(window).scroll(function(){a(document).height()-a(this).scrollTop()-a(this).height()<300&&(d&&(a("#J_loading").html("加载完毕"),a("#J_loading").show()),o=!0,a("#J_loading").show(),setTimeout(function(){o&&(a.getJSON(location.href,{page:i},function(e){201==e.code&&(a("#J_loading").html("加载完毕"),a("#J_loading").hide()),a("#J_loading").hide();for(var t=e.data.length,s=e.data,i=0;t>=i;i++){var o="<tr>";o+='<td class="one_t"><img src="'+s[i].avatar+'" alt="'+s[i].username+'" width="30" height="30" class="img_r">'+s[i].username+"</td>",o+='<td class="two_t">'+s[i].ufielddata.realname+"</td>",o+='<td class="one_t">--</td>',o+="</tr>",a("#act_rowLeft_id").append(o)}}),i++),o=!1},200))})}if(a("#J_loading").length){var i=2,o=!0,d=!1;a(window).scroll(function(){a(document).height()-a(this).scrollTop()-a(this).height()<300&&(d&&a("#J_loading").hide(),o=!0,isIOS?a("#J_loading").hide():a("#J_loading").show(),setTimeout(function(){o&&(a.getJSON(location.href,{page:i},function(e){201===e.code&&a("#J_loading").hide(),a("#J_loading").hide();for(var t=e.replylists.length,s=e.replylists,i=0;t>i;i++){var o='<div class="chtwo cl">';if(o+='<div class="viewhd webox">',o+='<div class="avatar_img"><a href="javascript:avatarBack('+s[i].authorid+')"><img src="'+s[i].avatar+'" class="img_noerror">',s[i].author_vip>0&&(o+='<span class="v_icon_vv">v</span>'),o+="</a></div>",o+='<div class="auth_wrap">',o+='<div class="authi_top">',o+=e.member_info.uid>0?2==e.member_info.isadmin||1==e.ismanager?"<a href=\"javascript:showWindow('rep_"+s[i].pid+"',"+s[i].pid+","+s[i].tid+","+s[i].authorid+","+e.fid+",'"+s[i].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showOrdinary('rep_"+s[i].pid+"',"+s[i].pid+","+s[i].tid+","+s[i].authorid+","+e.fid+",'"+s[i].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showReports('rep_"+s[i].pid+"',"+s[i].pid+","+s[i].tid+","+s[i].authorid+","+e.fid+",'"+s[i].author+'\');" rel="nofollow" class="look_at">...</a>',o+='<a href="javascript:void(0);" class="elecnation_dr"',s[i].author_vip>0&&(o+=' style="color:#eb6100"'),o+=">"+s[i].author,""!==s[i].author_hotfansclub_logo&&(o+='<img src="'+s[i].author_hotfansclub_logo+'" align="middle" style="border-radius: 50%; width: 16px; margin-left: 8px;">'),o+='</a><span class="lou_dr">'+s[i].new_position+"楼</span>",o+='<a href="javascript:void(0);" class="icon-zans paire_zg" data-url="'+cid_url+"/api/misc/like?pid="+s[i].pid+"&tid"+s[i].tid+"&authorid="+s[i].authorid+"&fid="+e.fid+"&uid="+e.member_info.uid+'"><em>'+s[i].support+"</em></a>",o+="</div>",o+='<div class="authi_p"><span>'+s[i].dateline+"</span></div>",o+='<div class="message">'+s[i].message+"</div>",s[i].reply.length){var d=s[i].reply,n=d.length;o+='<div class="reply_cont">';for(var r=0;n>r;r++)o+='<p class="rep_nor">'+d[r].author+"："+d[r].message+"</p>";o+="</div>"}o+="</div></div>",o+="</div>",a("#colume_listid").append(o)}}),i++),o=!1},200))})}if(a("#zan_btnGod").length&&a("#zan_btnGod").on("click",function(){var e=a(this);return a.ajax({type:"GET",url:e.attr("data-url"),dataType:"json",success:function(a){a?401===a.code?shellmodule.login(a.message):404===a.code?showmsg(a.message):409===a.code?showmsg(a.message):406===a.code?showmsg(a.message):200===a.code?(e.addClass("icon_o"),e.find("em").text(parseInt(e.find("em").text())+1),a.data.gold&&showmsg(a.message+"+"+a.data.gold+"金币")):showmsg("请稍后再试！"):showmsg("数据有误！")},error:function(){showmsg("出错了，请稍后再试!")}}),!1}),a(".colume").length&&a(".paire_zg").on("click",function(){var e=a(this);return a.ajax({type:"GET",url:a(this).attr("data-url"),dataType:"json",success:function(a){a&&(401===a.code?shellmodule.login(a.message):409===a.code?showmsg(a.message):406===a.code?showmsg(a.message):200===a.code?(e.addClass("zans-hover"),e.find("em").text(parseInt(e.find("em").text())+1),a.data.gold&&showmsg(a.message+"+"+a.data.gold+"金币")):showmsg("数据读取错误！"))},error:function(){showmsg("出错了，请稍后再试")}}),!1}),a("#fastEmoteArea").length){var n=a("#fastEmoteArea").attr("data-name");a("#fastEmoteArea li").on("click",function(e){var t=a(this).attr("data-id");return shellmodule.ShowReply(0,n,t),e.preventDefault(),!1})}if(a("#stickIdno").length&&a("#stickIdno").on("click",function(){var e=(a(this),a(this).attr("data-fid")),t=a(this).attr("data-tid");return a.ajax({type:"GET",url:cid_url+"/api/misc/stick",data:{fid:e,tid:t},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):404===e.code?showmsg(e.message):405===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),isIOS?window.location.href="ios://NativeThreadUpdate":isAndroid&&window.Android.NativeThreadUpdate()):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){a(".nav-overlay").hide(),a("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),a("#reportId").length&&a("#reportId").on("click",function(){var e=(a(this),a(this).attr("data-fid")),t=a(this).attr("data-tid"),s=a(this).attr("data-author"),i=a(this).attr("data-authorid"),o=a(this).attr("data-pid");return a.ajax({type:"GET",url:cid_url+"/api/misc/report",data:{fid:e,tid:t,author:s,authorid:i,pid:o,type:"thread"},dataType:"json",success:function(e){e?404===e.code?(showmsg(e.message,"",1e3),window.location.reload()):200===e.code?(showmsg(e.message,"",1e3),window.location.reload()):showmsg("请稍后再试"):showmsg("数据有误")},error:function(){showmsg("出错了，请稍候再试")}}),!1}),a("#deleteId").length&&a("#deleteId").on("click",function(){var e=(a(this),a(this).attr("data-fid")),t=a(this).attr("data-pid"),s=a(this).attr("data-tid"),i=a(this).attr("data-authorid");return a.ajax({type:"GET",url:cid_url+"/api/feed_manage/delete",data:{fid:e,pid:t,tid:s,authorid:i,type:"feed"},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):404===e.code?showmsg(e.message,"",1e3):402===e.code?showmsg(e.message,"",1e3):200===e.code?(showmsg(e.message,"",1e3),isIOS?(window.location.href="ios://NativeThreadUpdate",setTimeout(function(){window.location.href="ios://NativeBack"},1500)):isAndroid?setTimeout(function(){window.Android.NativeThreadUpdate(),window.Android.NativeBack()},1500):window.location.href=cid_url+"/home/gold_task"):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){a(".nav-overlay").hide(),a("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),a("#postsubreplay").length){var r=a("#replyform");a("#postsubreplay").on("click",function(e){var t=a("#replymessage"),s=a("#replytid").val();return a.ajax({type:"POST",url:r.attr("action"),data:{fid:a("#replyfid").val(),tid:s,parentid:a("#replayparenttid").val(),message:t.val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):403===e.code?showmsg(e.message):404===e.code?showmsg(e.message):408===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),t.val(""),isIOS?window.location.href="ios://NativeBackAndReload":isAndroid?window.Android.NativeBackAndReload():window.location.href=cid_url+"/api/show?tid="+s):showmsg("请稍后再试"):showmsg("有误，请稍后再试")},error:function(){showmsg("出错了，请稍后再试")}}),e.preventDefault(),!1})}if(a("#act_chact").length){var l=a("#activityform");a("#activitysubmit").on("click",function(e){a("#tid").val();return""==a("#name").val()||""==a("#phones").val()?showmsg("请完善你的姓名和手机号"):a.ajax({type:"POST",url:l.attr("action"),data:{tid:a("#tid").val(),name:a("#name").val(),phones:a("#phones").val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):405===e.code?showmsg(e.message):404===e.code?showmsg(e.message):200===e.code?a("#ispay").length?window.location.reload():(showmsg(e.message,"",1e3),setTimeout(function(){window.location.reload()},1500)):showmsg("稍后再试"):showmsg("出错了请稍候再试")},error:function(){showmsg("请稍候再试")}}),e.preventDefault(),!1}),a("#sub_resetid").on("click",function(e){return s.hide(),e.preventDefault(),!1})}if(a("#tagLabel").length&&(a("#tagLabel a").click(function(){return a("#tagsLandID").show(),!1}),a("#tagsClosed").click(function(){return a("#tagsLandID").hide(),!1})),(a("#thread_imgid").length||a(".thread_imgs").length)&&a(".Photoidurl").on("click",function(){var e=a("#thread_imgid").attr("data-tid"),t=a(this).attr("id");isIOS?window.location.href=cid_url+"/api/version3/show/photos?tid="+e+"&id="+t:window.location.href=cid_url+"/api/show/photos?tid="+e+"&id="+t}),a("#sin_noid").length&&a("#sin_noid").on("click",function(){var e=(a(this),a(this).attr("data-tid"));return a.ajax({type:"GET",url:cid_url+"/fansclub/activity/sign_in?tid="+e,dataType:"json",success:function(a){a?401===a.code?shellmodule.login(a.message):402===a.code?showmsg(a.message):405===a.code?showmsg(a.message):406===a.code?showmsg(a.message):407===a.code?showmsg(a.message):404===a.code?showmsg(a.message):200===a.code?(showmsg(a.message,"",1e3),setTimeout(function(){window.location.href=cid_url+"/api/show?tid="+e},1500)):showmsg("数据错误"):showmsg("请稍候再试")},error:function(){showmsg("数据有误，请稍候再试！")}}),!1}),a(".thread_mess").length){var c=a(".thread_mess").html(),h=/(http:\/\/|https:\/\/|www)((\w|=|\?|\.|\/|&|-)+)/g,m=/http:\/\/|https:\/\//g,g=a(".thread_mess img").attr("src"),u=a(".thread_mess a").attr("href"),p=a("#qiniu_video").html();h.exec(g)||h.exec(u)||h.exec(p)||(c=m.exec(c)?c.replace(h,"<a href='$1$2'>$1$2</a>"):c.replace(h,"<a href='http://$1$2'>$1$2</a>")),document.getElementById("thread_imgid").innerHTML=c}a(".topic_name").length&&a(".topic_name").on("click",function(){var e=a(this).attr("data-name");return shellmodule.ShowTopicName(e),!1}),a("img.img_noerror").on("error",function(){var e=event.srcElement;e.src=cid_url+"/static/images/nopic.png",e.onerror=null})});
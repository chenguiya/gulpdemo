define("js/ci_indextest",["jquery","swiper"],function(e){"user strict";function a(){t.ajax({type:"GET",url:location.href,data:{page:o},dataType:"json",success:function(e){t("#J_loading").hide();for(var a=e.replylists.length,s=e.replylists,i=0;a>i;i++){var o='<div class="chtwo cl">';if(o+='<div class="viewhd webox">',o+='<div class="avatar_img"><a href="javascript:avatarBack('+s[i].authorid+')"><img src="'+s[i].avatar+'" class="img_noerror">',s[i].author_vip>0&&(o+='<span class="v_icon_vv">v</span>'),o+="</a></div>",o+='<div class="auth_wrap">',o+='<div class="authi_top">',o+=e.member_info.uid>0?2==e.member_info.isadmin||1==e.ismanager?"<a href=\"javascript:showWindow('rep_"+s[i].pid+"',"+s[i].pid+","+s[i].tid+","+s[i].authorid+","+e.fid+",'"+s[i].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showOrdinary('rep_"+s[i].pid+"',"+s[i].pid+","+s[i].tid+","+s[i].authorid+","+e.fid+",'"+s[i].author+'\');" rel="nofollow" class="look_at">...</a>':"<a href=\"javascript:showReports('rep_"+s[i].pid+"',"+s[i].pid+","+s[i].tid+","+s[i].authorid+","+e.fid+",'"+s[i].author+'\');" rel="nofollow" class="look_at">...</a>',o+='<a href="javascript:void(0);" class="elecnation_dr"',s[i].author_vip>0&&(o+=' style="color:#eb6100"'),o+=">"+s[i].author,""!==s[i].author_hotfansclub_logo&&(o+='<img src="'+s[i].author_hotfansclub_logo+'" align="middle" style="border-radius: 50%; width: 16px; margin-left: 8px;">'),o+='</a><span class="lou_dr">'+s[i].new_position+"楼</span>",o+='<a href="javascript:void(0);" class="icon-zans paire_zg" data-url="'+cid_url+"/api/misc/like?pid="+s[i].pid+"&tid"+s[i].tid+"&authorid="+s[i].authorid+"&fid="+e.fid+"&uid="+e.member_info.uid+'"><em>'+s[i].support+"</em></a>",o+="</div>",o+='<div class="authi_p"><span>'+s[i].dateline+"</span></div>",o+='<div class="message">'+s[i].message,""!=s[i].images){o+='<div class="rep_imgr" align="center">';for(var d in s[i].images)o+='<img src="'+s[i].images[d]+'">';o+="</div>"}if(o+="</div>",s[i].reply.length){var n=s[i].reply,r=n.length;o+='<div class="reply_cont">';for(var c=0;r>c;c++)o+='<p class="rep_nor">'+n[c].author+"："+n[c].message+"</p>";o+="</div>"}o+="</div></div>",o+="</div>",t("#colume_listid").append(o)}},error:function(){showmsg("数据获取失败")}})}var t=e("jquery"),s=new Object,i={init:function(){var e=this;t(".display").each(function(a,i){i=t(i);var o=t(i.attr("href"));o&&o.attr("display")&&(o.css({display:"none"}),o.css({"z-index":"10002"}),s[o.attr("id")]=o,i.on("click",function(a){return e.maskinit(),"true"==o.attr("display")&&(o.css("display","block"),o.attr("display","false"),t("#mask").css({display:"block",width:"100%",height:"100%",position:"fixed",top:"0",left:"0",background:"rgba(0,0,0,.4)","z-index":"10001"})),!1}))})},maskinit:function(){var e=this;t("#mask").off().on("click",function(){e.hide()})},hide:function(){t("#mask").css("display","none"),t.each(s,function(e,a){a.css("display","none"),a.attr("display","true")})}};if(t(".display").length>0&&i.init(),t("#act_rowLeft_id").length){var o=2,d=!0,n=!1;t(window).scroll(function(){t(document).height()-t(this).scrollTop()-t(this).height()<300&&(n&&(t("#J_loading").html("加载完毕"),t("#J_loading").show()),d=!0,t("#J_loading").show(),setTimeout(function(){d&&(t.getJSON(location.href,{page:o},function(e){201==e.code&&(t("#J_loading").html("加载完毕"),t("#J_loading").hide()),t("#J_loading").hide();for(var a=e.data.length,s=e.data,i=0;a>=i;i++){var o="<tr>";o+='<td class="one_t"><img src="'+s[i].avatar+'" alt="'+s[i].username+'" width="30" height="30" class="img_r">'+s[i].username+"</td>",o+='<td class="two_t">'+s[i].ufielddata.realname+"</td>",o+='<td class="one_t">--</td>',o+="</tr>",t("#act_rowLeft_id").append(o)}}),o++),d=!1},200))})}if(document.getElementById("J_loading")){var o=2,d=!0,n=!1,r=parseInt(t("#J_loading").attr("totalpage"));t(window).scroll(function(){t(document).height()-t(this).scrollTop()-t(this).height()<200&&document.getElementById("J_loading")&&(d=!0,document.getElementById("J_loading").style.display="block",setTimeout(function(){d&&(a(),o++,o==r+1&&t("#J_loading").remove()),d=!1},1e3))})}if(t("#zan_btnGod").length&&t("#zan_btnGod").on("click",function(){var e=t(this);return t.ajax({type:"GET",url:e.attr("data-url"),dataType:"json",success:function(a){a?401===a.code?shellmodule.login(a.message):404===a.code?showmsg(a.message):409===a.code?showmsg(a.message):406===a.code?showmsg(a.message):200===a.code?(e.addClass("icon_o"),e.find("em").text(parseInt(e.find("em").text())+1),a.data.gold&&showmsg(a.message+"+"+a.data.gold+"金币")):showmsg("请稍后再试！"):showmsg("数据有误！")},error:function(){showmsg("出错了，请稍后再试!")}}),!1}),t(".colume").length&&t(".paire_zg").on("click",function(){var e=t(this);return t.ajax({type:"GET",url:t(this).attr("data-url"),dataType:"json",success:function(a){a&&(401===a.code?shellmodule.login(a.message):409===a.code?showmsg(a.message):406===a.code?showmsg(a.message):200===a.code?(e.addClass("zans-hover"),e.find("em").text(parseInt(e.find("em").text())+1),a.data.gold&&showmsg(a.message+"+"+a.data.gold+"金币")):showmsg("数据读取错误！"))},error:function(){showmsg("出错了，请稍后再试")}}),!1}),t("#fastEmoteArea").length){var c=t("#fastEmoteArea").attr("data-name");t("#fastEmoteArea li").on("click",function(e){var a=t(this).attr("data-id");return shellmodule.ShowReply(0,c,a),e.preventDefault(),!1})}if(t("#stickIdno").length&&t("#stickIdno").on("click",function(){var e=(t(this),t(this).attr("data-fid")),a=t(this).attr("data-tid");return t.ajax({type:"GET",url:cid_url+"/api/misc/stick",data:{fid:e,tid:a},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):404===e.code?showmsg(e.message):405===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),isIOS?window.location.href="ios://NativeThreadUpdate":isAndroid&&window.Android.NativeThreadUpdate()):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){t(".nav-overlay").hide(),t("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),t("#reportId").length&&t("#reportId").on("click",function(){var e=(t(this),t(this).attr("data-fid")),a=t(this).attr("data-tid"),s=t(this).attr("data-author"),i=t(this).attr("data-authorid"),o=t(this).attr("data-pid");return t.ajax({type:"GET",url:cid_url+"/api/misc/report",data:{fid:e,tid:a,author:s,authorid:i,pid:o,type:"thread"},dataType:"json",success:function(e){e?404===e.code?(showmsg(e.message,"",1e3),window.location.reload()):200===e.code?(showmsg(e.message,"",1e3),window.location.reload()):showmsg("请稍后再试"):showmsg("数据有误")},error:function(){showmsg("出错了，请稍候再试")}}),!1}),t("#deleteId").length&&t("#deleteId").on("click",function(){var e=(t(this),t(this).attr("data-fid")),a=t(this).attr("data-pid"),s=t(this).attr("data-tid"),i=t(this).attr("data-authorid");return t.ajax({type:"GET",url:cid_url+"/api/feed_manage/delete",data:{fid:e,pid:a,tid:s,authorid:i,type:"feed"},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):404===e.code?showmsg(e.message,"",1e3):402===e.code?showmsg(e.message,"",1e3):200===e.code?(showmsg(e.message,"",1e3),isIOS?(window.location.href="ios://NativeThreadUpdate",setTimeout(function(){window.location.href="ios://NativeBack"},1500)):isAndroid?setTimeout(function(){window.Android.NativeThreadUpdate(),window.Android.NativeBack()},1500):window.location.href=cid_url+"/home/gold_task"):showmsg("请稍后再试"):showmsg("数据有误"),setTimeout(function(){t(".nav-overlay").hide(),t("#pop_barids").hide().removeClass("pop-show")},1500)},error:function(){showmsg("出错了，请稍后再试")}}),!1}),t("#postsubreplay").length){var l=t("#replyform");t("#postsubreplay").on("click",function(e){var a=t("#replymessage"),s=t("#replytid").val();return t.ajax({type:"POST",url:l.attr("action"),data:{fid:t("#replyfid").val(),tid:s,parentid:t("#replayparenttid").val(),message:a.val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):402===e.code?showmsg(e.message):403===e.code?showmsg(e.message):404===e.code?showmsg(e.message):408===e.code?showmsg(e.message):200===e.code?(showmsg(e.message,"",1e3),a.val(""),isIOS?window.location.href="ios://NativeBackAndReload":isAndroid?window.Android.NativeBackAndReload():window.location.href=cid_url+"/api/show?tid="+s):showmsg("请稍后再试"):showmsg("有误，请稍后再试")},error:function(){showmsg("出错了，请稍后再试")}}),e.preventDefault(),!1})}if(t("#act_chact").length){var h=t("#activityform");t("#activitysubmit").on("click",function(e){t("#tid").val();return""==t("#name").val()||""==t("#phones").val()?showmsg("请完善你的姓名和手机号"):t.ajax({type:"POST",url:h.attr("action"),data:{tid:t("#tid").val(),name:t("#name").val(),phones:t("#phones").val()},dataType:"json",success:function(e){e?401===e.code?shellmodule.login(e.message):405===e.code?showmsg(e.message):404===e.code?showmsg(e.message):200===e.code?t("#ispay").length?window.location.reload():(showmsg(e.message,"",1e3),setTimeout(function(){window.location.reload()},1500)):showmsg("稍后再试"):showmsg("出错了请稍候再试")},error:function(){showmsg("请稍候再试")}}),e.preventDefault(),!1}),t("#sub_resetid").on("click",function(e){return i.hide(),e.preventDefault(),!1})}if(t("#tagLabel").length&&(t("#tagLabel a").click(function(){return t("#tagsLandID").show(),!1}),t("#tagsClosed").click(function(){return t("#tagsLandID").hide(),!1})),(t("#thread_imgid").length||t(".thread_imgs").length)&&t(".Photoidurl").on("click",function(){var e=t("#thread_imgid").attr("data-tid"),a=t(this).attr("id");isIOS?window.location.href=cid_url+"/api/version3/show/photos?tid="+e+"&id="+a:window.location.href=cid_url+"/api/show/photos?tid="+e+"&id="+a}),t("#sin_noid").length&&t("#sin_noid").on("click",function(){var e=(t(this),t(this).attr("data-tid"));return t.ajax({type:"GET",url:cid_url+"/fansclub/activity/sign_in?tid="+e,dataType:"json",success:function(a){a?401===a.code?shellmodule.login(a.message):402===a.code?showmsg(a.message):405===a.code?showmsg(a.message):406===a.code?showmsg(a.message):407===a.code?showmsg(a.message):404===a.code?showmsg(a.message):200===a.code?(showmsg(a.message,"",1e3),setTimeout(function(){window.location.href=cid_url+"/api/version3/show?tid="+e},1500)):showmsg("数据错误"):showmsg("请稍候再试")},error:function(){showmsg("数据有误，请稍候再试！")}}),!1}),t(".thread_mess").length){var m=t(".thread_mess").html(),g=/(http:\/\/|https:\/\/|www)((\w|=|\?|\.|\/|&|-)+)/g,u=/http:\/\/|https:\/\//g,p=t(".thread_mess img").attr("src"),f=t(".thread_mess a").attr("href"),w=t("#qiniu_video").html();g.exec(p)||g.exec(f)||g.exec(w)||(m=u.exec(m)?m.replace(g,"<a href='$1$2'>$1$2</a>"):m.replace(g,"<a href='http://$1$2'>$1$2</a>"),document.getElementById("thread_imgid").innerHTML=m)}t(".topic_name").length&&t(".topic_name").on("click",function(){var e=t(this).attr("data-name");return shellmodule.ShowTopicName(e),!1}),t("img.img_noerror").on("error",function(){var e=event.srcElement;e.src=cid_url+"/static/images/nopic.png",e.onerror=null})});
define("test/post",["jquery","ajaxupload","common","layer","js/module/layer/skin/layer.css"],function(require,exports,module){"user strict";var $=require("jquery"),d=require("ajaxupload"),j=require("common"),layer=require("layer");require("js/module/layer/skin/layer.css");var ue=UE.getEditor("editor",{toolbars:[["bold","italic","underline","forecolor","justifyleft","justifycenter","justifyright","justifyjustify","|","fontsize","simpleupload"]],elementPathEnabled:!1,wordCount:!1});$("#click_addpoll").length&&$("#click_addpoll").click(function(){var e=$("#itemDIv .itemHc").length,t='<div class="itemHc cl" id="package_'+e+'">';t+='<p class="av10">'+(e+1)+"</p>",t+='<p class="av40"><input type="text" class="input-text" name="package['+e+'][name]" placeholder="请填写收费项目名称" value="" /></p>',t+='<p class="av25"><input type="text" class="input-text" name="package['+e+'][price]" placeholder="请填写金额，须为整数" value="" /></p>',t+='<p class="av25"><input type="text" class="input-text" name="package['+e+'][num]" placeholder="不填则不限制" value="" /></p>',t+="</div>",$("#click_addpoll").parent().siblings("#itemDIv").append(t),e++}),$(".activityTab li").click(function(){$(".activityTab li").removeClass("active"),$(this).addClass("active"),$(".ulboxMain").css("display","none");var e=$(this).attr("id");return"payevent"==e?$("#free-event").val("1"):"freeevent"==e&&$("#free-event").val("0"),$("#"+e+"Center").show(),!1}),$("#defined_btn").click(function(){var e='<div style="text-align:center; padding-right:20px; padding-top:55px;"><ul class="recruitDiv cl"><li><a href="javascript:void(0)" data-click="单行字设置,/admin/defined_field/add?formtype=text,570,470">单行字</a></li><li><a href="javascript:void(0)" data-click="多行字设置,/admin/defined_field/add?formtype=textarea,570,470">多行字</a></li><li><a href="javascript:void(0)" data-click="单选设置,/admin/defined_field/add?formtype=radio,570,570">单选</a></li><li><a href="javascript:void(0)" data-click="多选设置,/admin/defined_field/add?formtype=select,570,570">多选</a></li></ul></div>';j.layerShow({html:e,title:"添加需填写信息项",width:"540",height:"200",type:!0})});var editbtn=$("#editAdd_type");editbtn.on({click:function(){var e=$(this).attr("data-click").split(",");m.layer_show(e[0],e[1],e[2],e[3])}},".edit_define"),editbtn.on({click:function(){var e=$(this),t=parseInt(e.closest(".edit_input").data("field"));$.ajax({type:"POST",url:homeUrl+"admin/defined_field/delete",data:{fieldid:t},cache:!1,dataTyep:"json",success:function(a){j.showmsg(a.message,"",1e3),e.closest(".edit_input").remove();var i=$("#fieldids").val().split(",");i.length<6&&$("#defined_btn").css("display","block");for(var l=0;l<i.length;l++)i[l]==t&&i.splice(l,1);$("#fieldids").val(i)},error:function(){j.showmsg("数据返回异常","",1e3)}})}},".close_defined");var sets=$("#append_parent");sets.on({click:function(){$(this).parents("#overpop").remove();var e=$(this).attr("data-click").split(",");m.layer_show(e[0],e[1],e[2],e[3])}},"a"),$("#starttimefrom").length&&$("#starttimefrom").focus(function(){$(this);WdatePicker({dateFmt:"yyyy-MM-dd HH:mm:ss",onpicked:function(e){$("#starttimefrom").val(e.cal.getNewDateStr())}})}),$("#startimeto").length&&$("#startimeto").focus(function(){WdatePicker({dateFmt:"yyyy-MM-dd HH:mm:ss",onpicked:function(e){$("#startimeto").val(e.cal.getNewDateStr())}})}),$("#expiration").length&&$("#expiration").focus(function(){WdatePicker({dateFmt:"yyyy-MM-dd HH:mm:ss",onpicked:function(e){$("#expiration").val(e.cal.getNewDateStr())}})}),$(document).on("change","#fileCover",function(){$.ajaxfileupload({type:"post",url:homeUrl+"upload/index",timeout:1e3,dataType:"json",fileElementId:"fileCover",success:function(data){if(200==data.code){var data=eval(data.data[0]);data.file_size<=1024?($("#previewid").html('<input type="hidden" id="aid" name="aid" value="'+data.aid+'" /><div class="coverPop" id="coverDetle"><img src="/upload/attachment/forum/'+data.attachment+'"><a href="javascript:void(0)" class="coverDetele icon-cw" id="coverDetele" onclick="shell.hideK()"></a></div>'),$(".btn_upload").hide()):alert("亲，图片大小不超过1M哦！")}else alert(data.message)},error:function(e,t,a){alert(a)}})});var m={};m.layer_show=function(e,t,a,i){(null==e||""==e)&&(e=!1),(null==t||""==t)&&(t="404.html"),(null==a||""==a)&&(a=800),(null==i||""==i)&&(i=$(window).height()-50),layer.open({type:2,area:[a+"px",i+"px"],fix:!1,maxmin:!0,scrollbar:!1,shade:.4,title:e,content:t})}});
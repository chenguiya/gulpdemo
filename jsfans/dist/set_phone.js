define("test/set_phone",["jquery","common","layer","js/module/layer/skin/layer.css"],function(e,o,a){"user strict";var n=e("jquery"),t=(e("layer"),e("common"));e("js/module/layer/skin/layer.css");var r,s={},d=60;s.phonenew=function(){n("#btnSendCode").click(function(){var e=parseInt(n(this).data("code")),o=n("#fid").val(),a="";2==e&&(a=n("#phone").val()),n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_setnewphone_sendcode",data:{step:e,fid:o,phone:a},timeout:1e3,cache:!1,dataType:"json",success:function(e){"undefined"!=typeof e.err?200==e.code?(n("#btnSendCode").attr("disabled","true"),n("#btnSendCode").val("发送成功"),r=window.setInterval(s.set_remain_time,1e3)):t.showmsg(e.err,"",1e3):n("#btnSendCode").val("发送验证码失败")},error:function(){t.showmsg("数据有问题","",1e3)}})}),n("#btnNextStep").click(function(){var e=parseInt(n(this).data("step")),o=n("#fid").val(),a="";2==e&&(a=n("#phone").val());var r=n("#verify_code").val();n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_setnewphone_verifycode",data:{step:e,fid:o,phone:a,verify_code:r},timeout:1e3,cache:!1,dataType:"json",success:function(a){"undefined"!=typeof a.err&&(200==a.code?(e+=1,window.location.href=homeUrl+"admin/wallet/setnewphone/"+o+"/"+e):t.showmsg(a.err,"",1e3))},error:function(){t.showmsg("数据有问题","",1e3)}})}),n("#layer_close").click(function(){var e=n(this).data("phone"),o=parent.layer.getFrameIndex(window.name);parent.$("#contact_edit").text(e),parent.layer.close(o)})},s.phone=function(){n("#btnSendCode").click(function(){var e=n("#phone").val();n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_setphone_1",data:{phone:e},dataType:"json",timeout:1e3,cache:!1,success:function(e){"undefined"!=typeof e.err?200==e.code?(n("#btnSendCode").attr("disabled","true"),n("#btnSendCode").val("发送成功"),r=window.setInterval(s.set_remain_time,1e3)):t.showmsg(e.err,"",1e3):n("#btnSendCode").val("发送验证码失败")},error:function(){t.showmsg("数据有问题","",1e3)}})}),n("#btnSubmit").click(function(){var e=n("#fid").val(),o=n("#phone").val(),a=n("#verify_code").val();n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_setphone_2",data:{fid:e,phone:o,verify_code:a},dataType:"json",timeout:1e3,cache:!1,success:function(e){if("undefined"!=typeof e.err)if(200==e.code){var o=parent.layer.getFrameIndex(window.name);parent.location.reload(),parent.layer.close(o)}else t.showmsg(e.err,"",1e3)},error:function(){t.showmsg("数据有问题","",1e3)}})})},s.setpassword=function(){n("#btnSendCode").click(function(){var e=n("#fid").val();n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_setpassword_1",data:{fid:e},timeout:1e3,cache:!1,dataType:"json",success:function(e){200==e.code?(n("#btnSendCode").attr("disabled","true"),n("#btnSendCode").val("发送成功"),r=window.setInterval(s.set_remain_time,1e3)):t.showmsg(e.err,"",1e3)},error:function(){t.showmsg("数据有问题","",1e3)}})}),n("#btnNextStep").click(function(){var e=n("#fid").val(),o=n("#verify_code").val();n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_setpassword_2",data:{fid:e,verify_code:o},timeout:1e4,cache:!1,dataType:"json",success:function(o){"undefined"!=typeof o.err&&(200==o.code?window.location.href=homeUrl+"admin/wallet/setpassword/"+e+"/2":t.showmsg(o.err,"",1e3))},error:function(){t.showmsg("数据有问题","",1e3)}})}),n("#btnConfirm").click(function(){var e=n("#fid").val(),o=n("#password").val(),a=n("#com_password").val();n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_setpassword_3",data:{fid:e,password:o,com_password:a},timeout:1e3,cache:!1,dataType:"json",success:function(o){200==o.code?window.location.href=homeUrl+"admin/wallet/setpassword/"+e+"/3":t.showmsg(o.err,"",1e3)},error:function(){t.showmsg("数据有问题","",1e3)}})}),n("#layer_close").click(function(){var e=parent.layer.getFrameIndex(window.name);parent.location.reload(),parent.layer.close(e)})},s.setaccount=function(){n("#form-wallet-setaccount").submit(function(){var e=n("#account").val();return""==e?(t.showmsg("请输入支付宝账号","",1e3),!1):void 0})},s.modify=function(){n("#btnConfirm").click(function(){var e=n("#fid").val(),o=n("#old_password").val(),a=n("#password").val(),r=n("#com_password").val();n.ajax({type:"POST",url:homeUrl+"admin/wallet/exec_modifypassword",data:{fid:e,old_password:o,password:a,com_password:r},timeout:1e3,cache:!1,dataType:"json",success:function(o){200==o.code?(window.location.href=homeUrl+"admin/wallet/setpassword/"+e+"/3",parent.location.reload()):t.showmsg(o.err,"",1e3)},error:function(){t.showmsg("数据有问题","",1e3)}})})},s.set_remain_time=function(){0==d?(window.clearInterval(r),n("#btnSendCode").removeAttr("disabled"),n("#btnSendCode").val("重新发送"),d=60):(d--,n("#btnSendCode").val(d+"'"))},a.exports=s});
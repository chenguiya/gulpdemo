function pickerDateRange(t,e){var a={aToday:"aToday",aYesterday:"aYesterday",aRecent7Days:"aRecent7Days",aRecent14Days:"aRecent14Days",aRecent30Days:"aRecent30Days",aRecent90Days:"aRecent90Days",startDate:"",endDate:"",startCompareDate:"",endCompareDate:"",minValidDate:"315507600",maxValidDate:"",success:function(t){return!0},startDateId:"startDate",startCompareDateId:"startCompareDate",endDateId:"endDate",endCompareDateId:"endCompareDate",target:"",needCompare:!1,suffix:"",inputTrigger:"input_trigger",compareTrigger:"compare_trigger",compareCheckboxId:"needCompare",calendars:2,dayRangeMax:0,monthRangeMax:12,dateTable:"dateRangeDateTable",selectCss:"dateRangeSelected",compareCss:"dateRangeCompare",coincideCss:"dateRangeCoincide",firstCss:"first",lastCss:"last",clickCss:"today",disableGray:"dateRangeGray",isToday:"dateRangeToday",joinLineId:"joinLine",isSingleDay:!1,defaultText:" 至 ",singleCompare:!1,stopToday:!0,isTodayValid:!1,weekendDis:!1,disCertainDay:[],disCertainDate:[],shortOpr:!1,noCalendar:!1,theme:"gri",magicSelect:!1,autoCommit:!1,autoSubmit:!1,replaceBtn:"btn_compare"},s=this;this.inputId=t,this.inputCompareId=t+"Compare",this.compareInputDiv="div_compare_"+t,this.mOpts=$.extend({},a,e),this.mOpts.calendars=Math.min(this.mOpts.calendars,3),this.mOpts.compareCss="ta"==this.mOpts.theme?this.mOpts.selectCss:this.mOpts.compareCss,this.periodObj={},this.periodObj[s.mOpts.aToday]=0,this.periodObj[s.mOpts.aYesterday]=1,this.periodObj[s.mOpts.aRecent7Days]=6,this.periodObj[s.mOpts.aRecent14Days]=13,this.periodObj[s.mOpts.aRecent30Days]=29,this.periodObj[s.mOpts.aRecent90Days]=89,this.startDefDate="";var i=""==this.mOpts.suffix?(new Date).getTime():this.mOpts.suffix;this.calendarId="calendar_"+i,this.dateListId="dateRangePicker_"+i,this.dateRangeCompareDiv="dateRangeCompareDiv_"+i,this.dateRangeDiv="dateRangeDiv_"+i,this.compareCheckBoxDiv="dateRangeCompareCheckBoxDiv_"+i,this.submitBtn="submit_"+i,this.closeBtn="closeBtn_"+i,this.preMonth="dateRangePreMonth_"+i,this.nextMonth="dateRangeNextMonth_"+i,this.startDateId=this.mOpts.startDateId+"_"+i,this.endDateId=this.mOpts.endDateId+"_"+i,this.compareCheckboxId=this.mOpts.compareCheckboxId+"_"+i,this.startCompareDateId=this.mOpts.startCompareDateId+"_"+i,this.endCompareDateId=this.mOpts.endCompareDateId+"_"+i;var d={gri:['<div id="'+this.calendarId+'" class="gri_dateRangeCalendar">','<table class="gri_dateRangePicker"><tr id="'+this.dateListId+'"></tr></table>','<div class="gri_dateRangeOptions" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="gri_dateRangeInput" id="'+this.dateRangeDiv+'" >','<input type="text" class="gri_dateRangeInput" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span id="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div class="gri_dateRangeInput" id="'+this.dateRangeCompareDiv+'">','<input type="text" class="gri_dateRangeInput" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","<div>",'<input type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="确定" />','&nbsp;<a id="'+this.closeBtn+'" href="javascript:;">关闭</a>',"</div>","</div>","</div>"],ta:['<div id="'+this.calendarId+'" class="ta_calendar ta_calendar2 cf">','<div class="ta_calendar_cont cf" id="'+this.dateListId+'">',"</div>",'<div class="ta_calendar_footer cf" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="frm_msg">','<div id="'+this.dateRangeDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div id="'+this.dateRangeCompareDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","</div>",'<div class="frm_btn">','<input class="ta_btn ta_btn_primary" type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="确定" />','<input class="ta_btn" type="button" id="'+this.closeBtn+'" value="取消"/>',"</div>","</div>","</div>"]},r={gri:['<label class="gri_contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="gri_pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>对比',"</label>",'<input type="text" name="'+this.inputCompareId+'" id="'+this.inputCompareId+'" value="" class="gri_date"/>'],ta:['<label class="contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>对比',"</label>",'<div class="ta_date" id="'+this.compareInputDiv+'">','	<span name="dateCompare" id="'+this.inputCompareId+'" class="date_title"></span>','	<a class="opt_sel" id="'+this.mOpts.compareTrigger+'" href="#">','		<i class="i_orderd"></i>',"	</a>","</div>"]};"ta"==this.mOpts.theme?$(r[this.mOpts.theme].join("")).insertAfter($("#div_"+this.inputId)):$(r[this.mOpts.theme].join("")).insertAfter($("#"+this.inputId)),this.mOpts.noCalendar&&($("#"+this.inputId).css("display","none"),$("#"+this.compareCheckboxId).parent().css("display","none")),$(0<$("#appendParent").length?"#appendParent":document.body).append(d[this.mOpts.theme].join("")),$("#"+this.calendarId).css("z-index",9999),1>$("#"+this.mOpts.startDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startDateId+'" name="'+this.mOpts.startDateId+'" value="'+this.mOpts.startDate+'" />'):$("#"+this.mOpts.startDateId).val(this.mOpts.startDate),1>$("#"+this.mOpts.endDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endDateId+'" name="'+this.mOpts.endDateId+'" value="'+this.mOpts.endDate+'" />'):$("#"+this.mOpts.endDateId).val(this.mOpts.endDate),1>$("#"+this.mOpts.compareCheckboxId).length&&$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="checkbox" id="'+this.mOpts.compareCheckboxId+'" name="'+this.mOpts.compareCheckboxId+'" value="0" style="display:none;" />'),0==this.mOpts.needCompare?($("#"+this.compareInputDiv).css("display","none"),$("#"+this.compareCheckBoxDiv).css("display","none"),$("#"+this.dateRangeCompareDiv).css("display","none"),$("#"+this.compareCheckboxId).attr("disabled",!0),$("#"+this.startCompareDateId).attr("disabled",!0),$("#"+this.endCompareDateId).attr("disabled",!0),$("#"+this.compareCheckboxId).parent().css("display","none"),$("#"+this.mOpts.replaceBtn).length>0&&$("#"+this.mOpts.replaceBtn).hide()):(1>$("#"+this.mOpts.startCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startCompareDateId+'" name="'+this.mOpts.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" />'):$("#"+this.mOpts.startCompareDateId).val(this.mOpts.startCompareDate),1>$("#"+this.mOpts.endCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endCompareDateId+'" name="'+this.mOpts.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" />'):$("#"+this.mOpts.endCompareDateId).val(this.mOpts.endCompareDate),""==this.mOpts.startCompareDate||""==this.mOpts.endCompareDate?($("#"+this.compareCheckboxId).attr("checked",!1),$("#"+this.mOpts.compareCheckboxId).attr("checked",!1)):($("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),this.dateInput=this.startDateId,this.changeInput(this.dateInput),$("#"+this.startDateId).bind("click",function(){return s.endCompareDateId==s.dateInput&&$("#"+s.startCompareDateId).val(s.startDefDate),s.startDefDate="",s.removeCSS(1),s.changeInput(s.startDateId),!1}),$("#"+this.calendarId).bind("click",function(t){t.stopPropagation()}),$("#"+this.startCompareDateId).bind("click",function(){return s.endDateId==s.dateInput&&$("#"+s.startDateId).val(s.startDefDate),s.startDefDate="",s.removeCSS(0),s.changeInput(s.startCompareDateId),!1}),$("#"+this.submitBtn).bind("click",function(){return s.close(1),s.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()}),!1}),$("#"+this.closeBtn).bind("click",function(){return s.close(),!1}),$("#"+this.inputId).bind("click",function(){return s.init(),s.show(!1,s),!1}),$("#"+this.mOpts.inputTrigger).bind("click",function(){return s.init(),s.show(!1,s),!1}),$("#"+this.mOpts.compareTrigger).bind("click",function(){return s.init(!0),s.show(!0,s),!1}),$("#"+this.inputCompareId).bind("click",function(){return s.init(!0),s.show(!0,s),!1}),this.mOpts.singleCompare&&("ta"===this.mOpts.theme?($("#"+s.startDateId).val(s.mOpts.startDate),$("#"+s.endDateId).val(s.mOpts.startDate),$("#"+s.startCompareDateId).val(s.mOpts.startCompareDate),$("#"+s.endCompareDateId).val(s.mOpts.startCompareDate)):($("#"+s.startDateId).val(s.mOpts.startDate),$("#"+s.endDateId).val(s.mOpts.startDate),$("#"+s.startCompareDateId).val(s.mOpts.startCompareDate),$("#"+s.endCompareDateId).val(s.mOpts.startCompareDate),$("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),$("#"+this.dateRangeCompareDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareCheckboxId).bind("click",function(){$("#"+s.inputCompareId).css("display",this.checked?"":"none"),$("#"+s.dateRangeCompareDiv).css("display",this.checked?"":"none"),$("#"+s.compareInputDiv).css("display",this.checked?"":"none"),$("#"+s.startCompareDateId).css("disabled",this.checked?!1:!0),$("#"+s.endCompareDateId).css("disabled",this.checked?!1:!0),$("#"+s.mOpts.compareCheckboxId).attr("checked",$("#"+s.compareCheckboxId).attr("checked")),$("#"+s.mOpts.compareCheckboxId).val($("#"+s.compareCheckboxId).attr("checked")?1:0),$("#"+s.compareCheckboxId).attr("checked")?(sDate=s.str2date($("#"+s.startDateId).val()),sTime=sDate.getTime(),eDate=s.str2date($("#"+s.endDateId).val()),eTime=eDate.getTime(),scDate=$("#"+s.startCompareDateId).val(),ecDate=$("#"+s.endCompareDateId).val(),(""==scDate||""==ecDate)&&(ecDate=s.str2date(s.date2ymd(sDate).join("-")),ecDate.setDate(ecDate.getDate()-1),scDate=s.str2date(s.date2ymd(sDate).join("-")),scDate.setDate(scDate.getDate()-(eTime-sTime)/864e5-1),ecDate.getTime()<1e3*s.mOpts.minValidDate&&(scDate=sDate,ecDate=eDate),ecDate.getTime()>=1e3*s.mOpts.minValidDate&&scDate.getTime()<1e3*s.mOpts.minValidDate&&(scDate.setTime(1e3*s.mOpts.minValidDate),scDate=s.str2date(s.date2ymd(scDate).join("-")),ecDate.setDate(scDate.getDate()+(eTime-sTime)/864e5-1)),$("#"+s.startCompareDateId).val(s.formatDate(s.date2ymd(scDate).join("-"))),$("#"+s.endCompareDateId).val(s.formatDate(s.date2ymd(ecDate).join("-")))),s.addCSS(1),s.changeInput(s.startCompareDateId)):(s.removeCSS(1),s.changeInput(s.startDateId)),s.close(1),s.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()})}),this.init(),this.close(1),this.mOpts.replaceBtn&&$("#"+this.mOpts.replaceBtn).length>0&&($("#"+s.compareCheckboxId).hide(),$(".contrast").hide(),$("#"+this.mOpts.replaceBtn).bind("click",function(){var t=this;$("#"+s.compareCheckboxId).attr("checked")?$("#"+s.compareCheckboxId).removeAttr("checked"):$("#"+s.compareCheckboxId).attr("checked","checked"),$("#"+s.compareCheckboxId).click(),$("#"+s.compareCheckboxId).attr("checked")?function(){$("#"+s.compareCheckboxId).removeAttr("checked"),$(".contrast").hide(),$(t).text("按时间对比")}():function(){$("#"+s.compareCheckboxId).attr("checked","checked"),$(".contrast").show(),$(t).text("取消对比")}()})),this.mOpts.autoCommit&&this.mOpts.success({startDate:$("#"+s.mOpts.startDateId).val(),endDate:$("#"+s.mOpts.endDateId).val(),needCompare:$("#"+s.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+s.mOpts.startCompareDateId).val(),endCompareDate:$("#"+s.mOpts.endCompareDateId).val()}),$(document).bind("click",function(){s.close()})}pickerDateRange.prototype.init=function(t){var e=this,a="undefined"!=typeof t?t&&$("#"+e.compareCheckboxId).attr("checked"):$("#"+e.compareCheckboxId).attr("checked");$("#"+this.dateListId).empty();var s=""==this.mOpts.endDate?new Date:this.str2date(this.mOpts.endDate);if(this.calendar_endDate=new Date(s.getFullYear(),s.getMonth()+1,0),this.mOpts.magicSelect&&"ta"==this.mOpts.theme){var i=0;do{var d=null;if(0==i)d=this.fillDate(this.str2date($("#"+this.endDateId).val()).getFullYear(),this.str2date($("#"+this.endDateId).val()).getMonth(),i),$("#"+this.dateListId).append(d);else{d=this.fillDate(this.str2date($("#"+this.startDateId).val()).getFullYear(),this.str2date($("#"+this.startDateId).val()).getMonth(),i);var r="ta"==this.mOpts.theme?$("#"+this.dateListId).find("table").get(0):$("#"+this.dateListId).find("td").get(0);$(r).before(d)}i++}while(2>i);this.calendar_startDate=new Date(this.str2date($("#"+this.startDateId).val()).getFullYear(),this.str2date($("#"+this.startDateId).val()).getMonth(),1)}else{for(var i=0;i<this.mOpts.calendars;i++){var d=null;if("ta"==this.mOpts.theme?d=this.fillDate(s.getFullYear(),s.getMonth(),i):(d=document.createElement("td"),$(d).append(this.fillDate(s.getFullYear(),s.getMonth(),i)),$(d).css("vertical-align","top")),0==i)$("#"+this.dateListId).append(d);else{var r="ta"==this.mOpts.theme?$("#"+this.dateListId).find("table").get(0):$("#"+this.dateListId).find("td").get(0);$(r).before(d)}s.setMonth(s.getMonth()-1,1)}this.calendar_startDate=new Date(s.getFullYear(),s.getMonth()+1,1)}$("#"+this.preMonth).bind("click",function(){return e.calendar_endDate.setMonth(e.calendar_endDate.getMonth()-1,1),e.mOpts.endDate=e.date2ymd(e.calendar_endDate).join("-"),e.init(t),1==e.mOpts.calendars&&(""==$("#"+e.startDateId).val()?e.changeInput(e.startDateId):e.changeInput(e.endDateId)),!1}),$("#"+this.nextMonth).bind("click",function(){return e.calendar_endDate.setMonth(e.calendar_endDate.getMonth()+1,1),e.mOpts.endDate=e.date2ymd(e.calendar_endDate).join("-"),e.init(t),1==e.mOpts.calendars&&(""==$("#"+e.startDateId).val()?e.changeInput(e.startDateId):e.changeInput(e.endDateId)),!1}),this.mOpts.magicSelect&&this.bindChangeForSelect(),this.endDateId!=this.dateInput&&this.endCompareDateId!=this.dateInput&&(a&&"undefined"!=typeof t?this.addCSS(1):this.addCSS(0)),a&&"undefined"!=typeof t?e.addCSS(1):e.addCSS(0),$("#"+e.inputCompareId).css("display",a?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none");for(var n in e.periodObj)$("#"+n).length>0&&($("#"+n).unbind("click"),$("#"+n).bind("click",function(){var t="ta"==e.mOpts.theme?"active":"a";$(this).parent().nextAll().removeClass(t),$(this).parent().prevAll().removeClass(t),$(this).parent().addClass(t);var a=e.getSpecialPeriod(e.periodObj[$(this).attr("id")]);$("#"+e.startDateId).val(e.formatDate(a.otherday)),$("#"+e.endDateId).val(e.formatDate(a.today)),$("#"+e.mOpts.startDateId).val($("#"+e.startDateId).val()),$("#"+e.mOpts.endDateId).val($("#"+e.endDateId).val()),"ta"==e.mOpts.theme?$("#"+e.compareInputDiv).hide():$("#"+e.inputCompareId).css("display","none"),$("#"+e.compareCheckboxId).attr("checked",!1),$("#"+e.mOpts.compareCheckboxId).attr("checked",!1),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),e.close(1),$("#"+e.startCompareDateId).val(""),$("#"+e.endCompareDateId).val(""),$("#"+e.mOpts.startCompareDateId).val(""),$("#"+e.mOpts.endCompareDateId).val(""),$("#"+e.mOpts.compareCheckboxId).val(0),$("#"+e.mOpts.replaceBtn).length>0&&($(".contrast").hide(),$("#"+e.mOpts.replaceBtn).text("按时间对比")),e.mOpts.success({startDate:$("#"+e.mOpts.startDateId).val(),endDate:$("#"+e.mOpts.endDateId).val(),needCompare:$("#"+e.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+e.mOpts.startCompareDateId).val(),endCompareDate:$("#"+e.mOpts.endCompareDateId).val()})}));$(document).bind("click",function(){e.close()}),$("#"+this.inputId).bind("change",function(){""===$(this).val()&&($("#"+e.startDateId).val(""),$("#"+e.endDateId).val(""),$("#"+e.startCompareDateId).val(""),$("#"+e.endCompareDateId).val(""))})},pickerDateRange.prototype.bindChangeForSelect=function(){var t=this,e=function(t,e,a,s){function i(){$("#"+e).removeClass(s)}function d(){$("#"+e).addClass(s)}function r(){return $("#"+e).attr("class")==s}s=s||"open";var n=null,p=500;$("#"+t).click(function(){r()?i():d()}).mouseover(function(){clearTimeout(n)}).mouseout(function(){n=setTimeout(i,p)}),$("#"+a).mouseover(function(){clearTimeout(n)}).mouseout(function(){n=setTimeout(i,p)})};try{$("#"+this.dateListId).find('div[id*="selected"]').each(function(){var a=$(this).attr("id").match(/(\w+)_(\d)/i);if(a){var s=a[1],i=a[2];"yselected"==s?e("_ybtn_"+i,$(this).attr("id"),"_yctn_"+i):"mselected"==s&&e("_mbtn_"+i,$(this).attr("id"),"_mctn_"+i),$(this).find("li a").each(function(){$(this).click(function(){var e=$(this).parents(".select_wrap").attr("id").match(/(\w+)_(\d)/i),a=e[1],s=e[2],i=null;s^!1?("yselected"==a?t.calendar_startDate.setYear(1*$(this).text(),1):(a="mselected")&&t.calendar_startDate.setMonth(1*$(this).text()-1,1),t.mOpts.startDate=t.date2ymd(t.calendar_startDate).join("-"),i=t.fillDate(t.calendar_startDate.getFullYear(),t.calendar_startDate.getMonth(),s)):("yselected"==a?t.calendar_endDate.setYear(1*$(this).text(),1):(a="mselected")&&t.calendar_endDate.setMonth(1*$(this).text()-1,1),t.mOpts.endDate=t.date2ymd(t.calendar_endDate).join("-"),i=t.fillDate(t.calendar_endDate.getFullYear(),t.calendar_endDate.getMonth(),s));var d=$("#"+t.dateListId).find("table").get(1^s);$(d).replaceWith(i),t.removeCSS(0),t.bindChangeForSelect()})})}})}catch(a){window.console&&console.log(a)}},pickerDateRange.prototype.getSpecialPeriod=function(t){var e=this,a=new Date;1==e.mOpts.isTodayValid&&""!=e.mOpts.isTodayValid||2>t?"":a.setTime(a.getTime()-864e5);var s=a.getTime()-24*t*60*60*1e3<1e3*e.mOpts.minValidDate?1e3*e.mOpts.minValidDate:a.getTime()-24*t*60*60*1e3,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();a.setTime(s);var d=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return t==e.periodObj.aYesterday&&(i=d),{today:i,otherday:d}},pickerDateRange.prototype.getCurrentDate=function(){return{startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}},pickerDateRange.prototype.removeCSS=function(t,e){"undefined"==typeof e&&(e=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof t&&(t=0);var a=this.calendar_startDate,s=this.calendar_endDate;this.mOpts.magicSelect&&(a=this.str2date($("#"+this.startDateId).val()),s=this.str2date($("#"+this.endDateId).val()));for(var i=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d="",r=new Date(i);r.getTime()<=s.getTime();r.setDate(r.getDate()+1))d=0==t?this.mOpts.theme+"_"+this.mOpts.selectCss:this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(r).join("-")).removeClass(d),$("#"+this.calendarId+"_"+this.date2ymd(r).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss)},pickerDateRange.prototype.addCSS=function(t,e){"undefined"==typeof e&&(e=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof t&&(t=0);for(var a=this.str2date($("#"+this.startDateId).val()),s=this.str2date($("#"+this.endDateId).val()),i=this.str2date($("#"+this.startCompareDateId).val()),d=this.str2date($("#"+this.endCompareDateId).val()),r=0==t?a:i,n=0==t?s:d,p="",h=new Date(r);h.getTime()<=n.getTime();h.setDate(h.getDate()+1))0==t?(p=this.mOpts.theme+"_"+this.mOpts.selectCss,$("#"+this.calendarId+"_"+this.date2ymd(h).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss),$("#"+this.calendarId+"_"+this.date2ymd(h).join("-")).removeClass(p)):p=this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(h).join("-")).attr("class",p);"ta"==this.mOpts.theme&&($("#"+this.calendarId+"_"+this.date2ymd(new Date(r)).join("-")).removeClass().addClass(this.mOpts.firstCss),$("#"+this.calendarId+"_"+this.date2ymd(new Date(n)).join("-")).removeClass().addClass(this.mOpts.lastCss),r.getTime()==n.getTime()&&$("#"+this.calendarId+"_"+this.date2ymd(new Date(n)).join("-")).removeClass().addClass(this.mOpts.clickCss))},pickerDateRange.prototype.checkDateRange=function(t,e){var a,s=this.str2date(t),i=this.str2date(e),d=s.getTime(),r=i.getTime();if(r>=d){if(a=this.str2date(t),a.setMonth(a.getMonth()+this.mOpts.monthRangeMax),a.setDate(a.getDate()+this.mOpts.dayRangeMax-1),a.getTime()<r)return alert("结束日期不能大于："+this.date2ymd(a).join("-")),!1}else if(a=this.str2date(e),a.setMonth(a.getMonth()-this.mOpts.monthRangeMax),a.setDate(a.getDate()-this.mOpts.dayRangeMax+1),a.getTime()>r)return alert("开始日期不能小于："+this.date2ymd(a).join("-")),!1;return!0},pickerDateRange.prototype.selectDate=function(t){this.changeInput(this.dateInput);var e=this.formatDate(t);if(this.startDateId==this.dateInput)this.removeCSS(0),this.removeCSS(1),$("#"+this.calendarId+"_"+t).attr("class","ta"==this.mOpts.theme?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.selectCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(e),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startDateId,$("#"+this.endDateId).val(e),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):this.dateInput=this.endDateId;else if(this.endDateId==this.dateInput){if(""==$("#"+this.startDateId).val())return this.dateInput=this.startDateId,this.selectDate(t),!1;if(0==this.checkDateRange($("#"+this.startDateId).val(),t))return!1;-1==this.compareStrDate(t,$("#"+this.startDateId).val())&&($("#"+this.dateInput).val($("#"+this.startDateId).val()),$("#"+this.startDateId).val(e),e=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(e),this.dateInput=this.startDateId,this.removeCSS(0),this.addCSS(0),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}else if(this.startCompareDateId==this.dateInput)this.removeCSS(1),this.removeCSS(0),$("#"+this.calendarId+"_"+t).attr("class","ta"==this.mOpts.theme?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.compareCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(e),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startCompareDateId,$("#"+this.endCompareDateId).val(e),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):this.dateInput=this.endCompareDateId;else if(this.endCompareDateId==this.dateInput){if(""==$("#"+this.startCompareDateId).val())return this.dateInput=this.startCompareDateId,this.selectDate(t),!1;if(0==this.checkDateRange($("#"+this.startCompareDateId).val(),t))return!1;-1==this.compareStrDate(t,$("#"+this.startCompareDateId).val())&&($("#"+this.dateInput).val($("#"+this.startCompareDateId).val()),$("#"+this.startCompareDateId).val(e),e=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(e),this.dateInput=this.startCompareDateId,this.removeCSS(1),this.addCSS(1),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}},pickerDateRange.prototype.show=function(t,e){$("#"+e.dateRangeDiv).css("display",t?"none":""),$("#"+e.dateRangeCompareDiv).css("display",t?"":"none");var a=t?$("#"+this.inputCompareId).offset():$("#"+this.inputId).offset(),s=(t?$("#"+this.inputCompareId).height():$("#"+this.inputId).height(),parseInt($(document.body)[0].clientWidth)),i=a.left;return $("#"+this.calendarId).css("display","block"),(1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay)&&($("#"+this.endDateId).css("display","none"),$("#"+this.endCompareDateId).css("display","none"),$("#"+this.mOpts.joinLineId).css("display","none"),$("."+this.mOpts.joinLineId).css("display","none")),s>0&&$("#"+this.calendarId).width()+a.left>s&&(i=a.left+$("#"+this.inputId).width()-$("#"+this.calendarId).width()+(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?5:0),"ta"==e.mOpts.theme&&(i+=50)),$("#"+this.calendarId).css("left",i+"px"),$("#"+this.calendarId).css("top",a.top+("ta"==e.mOpts.theme?35:22)+"px"),t?this.changeInput(this.startCompareDateId):this.changeInput(this.startDateId),!1},pickerDateRange.prototype.close=function(t){var e=this;if(t){this.mOpts.shortOpr===!0?($("#"+this.inputId).val($("#"+this.startDateId).val()),$("#"+this.inputCompareId).val($("#"+this.startCompareDateId).val())):$("#"+this.inputId).val($("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()));var a=1==this.mOpts.isTodayValid&&""!=this.mOpts.isTodayValid?(new Date).getTime():(new Date).getTime()-864e5,s=this.str2date($("#"+this.startDateId).val()).getTime(),i=this.str2date($("#"+this.endDateId).val()).getTime();if(s>i){var d=$("#"+this.startDateId).val();$("#"+this.startDateId).val($("#"+this.endDateId).val()),$("#"+this.endDateId).val(d)}var r=1==this.mOpts.shortOpr?$("#"+this.startDateId).val():$("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()),n=document.getElementById(this.inputId);if(n&&"INPUT"==n.tagName?($("#"+this.inputId).val(r),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).val(o)):($("#"+this.inputId).html(r),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).html(o)),"ta"!=this.mOpts.theme&&""!=$("#"+this.startCompareDateId).val()&&""!=$("#"+this.endCompareDateId).val()){var p=this.str2date($("#"+this.startCompareDateId).val()).getTime(),h=this.str2date($("#"+this.endCompareDateId).val()).getTime(),m=p+i-s;m>a&&(m=a,$("#"+this.startCompareDateId).val(this.formatDate(this.date2ymd(new Date(m+s-i)).join("-")))),$("#"+this.endCompareDateId).val(this.formatDate(this.date2ymd(new Date(m)).join("-")));var p=this.str2date($("#"+this.startCompareDateId).val()).getTime(),h=this.str2date($("#"+this.endCompareDateId).val()).getTime();if(p>h){var d=$("#"+this.startCompareDateId).val();$("#"+this.startCompareDateId).val($("#"+this.endCompareDateId).val()),$("#"+this.endCompareDateId).val(d)}}var o=1==this.mOpts.shortOpr?$("#"+this.startCompareDateId).val():$("#"+this.startCompareDateId).val()+(""==$("#"+this.endCompareDateId).val()?"":this.mOpts.defaultText+$("#"+this.endCompareDateId).val());n&&"INPUT"==n.tagName?$("#"+this.inputCompareId).val(o):$("#"+this.inputCompareId).html(o);$("#"+this.mOpts.startDateId).val($("#"+this.startDateId).val()),$("#"+this.mOpts.endDateId).val($("#"+this.endDateId).val()),$("#"+this.mOpts.startCompareDateId).val($("#"+this.startCompareDateId).val()),$("#"+this.mOpts.endCompareDateId).val($("#"+this.endCompareDateId).val());for(var c in this.periodObj)$("#"+this.mOpts[c])&&$("#"+this.mOpts[c]).parent().removeClass("a")}return $("#"+e.calendarId).css("display","none"),!1},pickerDateRange.prototype.fillDate=function(t,e,a){var s=this,i="ta"==this.mOpts.theme,d=new Date(t,e,1),r=new Date(t,e,1),n=r.getDay();r.setDate(1-n);var p=new Date(t,e+1,0),h=new Date(t,e+1,0);n=h.getDay(),h.setDate(h.getDate()+6-n);var m=new Date,o=m.getDate(),c=m.getMonth(),l=m.getFullYear(),D=document.createElement("table");if(i){if(D.className=this.mOpts.dateTable,cap=document.createElement("caption"),this.mOpts.magicSelect){var I=['<div class="select_wrap" id="yselected_'+a+'"><div class="select" id="_ybtn_'+a+'">'+t+'</div><div class="dropdown" id="_yctn_'+a+'"><ul class="list_menu">'],v=['<div class="select_wrap" id="mselected_'+a+'"><div class="select" id="_mbtn_'+a+'">'+(e+1)+'</div><div class="dropdown" id="_mctn_'+a+'"><ul class="list_menu">'];O=1,yt=l;do I.push('<li><a href="javascript:;">'+yt--+"</a></li>"),v.push('<li><a href="javascript:;">'+O++ +"</a></li>");while(12>=O);I.push("</ul></div></div>"),v.push("</ul></div></div>"),$(cap).append(I.join("")+'<span class="joinLine"> 年 </span>'+v.join("")+'<span class="joinLine"> 月 </span>')}else $(cap).append(t+"年"+(e+1)+"月");$(D).append(cap),thead=document.createElement("thead"),tr=document.createElement("tr");for(var C=["日","一","二","三","四","五","六"],O=0;7>O;O++)th=document.createElement("th"),$(th).append(C[O]),$(tr).append(th);$(thead).append(tr),$(D).append(thead),tr=document.createElement("tr"),td=document.createElement("td"),this.mOpts.magicSelect||(0==a&&$(td).append('<a href="javascript:void(0);" id="'+this.nextMonth+'"><i class="i_next"></i></a>'),a+1==this.mOpts.calendars&&$(td).append('<a href="javascript:void(0);" id="'+this.preMonth+'"><i class="i_pre"></i></a>')),$(td).attr("colSpan",7),$(td).css("text-align","center"),$(tr).append(td),$(D).append(tr)}else{D.className=this.mOpts.theme+"_"+this.mOpts.dateTable,tr=document.createElement("tr"),td=document.createElement("td"),0==a&&$(td).append('<a href="javascript:void(0);" id="'+this.nextMonth+'" class="gri_dateRangeNextMonth"><span>next</span></a>'),a+1==this.mOpts.calendars&&$(td).append('<a href="javascript:void(0);" id="'+this.preMonth+'" class="gri_dateRangePreMonth"><span>pre</span></a>'),$(td).append(t+"年"+(e+1)+"月"),$(td).attr("colSpan",7),$(td).css("text-align","center"),$(td).css("background-color","#F9F9F9"),$(tr).append(td),$(D).append(tr);var C=["日","一","二","三","四","五","六"];tr=document.createElement("tr");for(var O=0;7>O;O++)td=document.createElement("td"),$(td).append(C[O]),$(tr).append(td);$(D).append(tr)}for(var u="",g=0,y="",f=r;f.getTime()<=h.getTime();f.setDate(f.getDate()+1)){if(f.getTime()<d.getTime())u=this.mOpts.theme+"_"+this.mOpts.disableGray,g="-1";else if(f.getTime()>p.getTime())u=this.mOpts.theme+"_"+this.mOpts.disableGray,g="1";else if(1==this.mOpts.stopToday&&f.getTime()>m.getTime()||f.getTime()<1e3*s.mOpts.minValidDate||""!==s.mOpts.maxValidDate&&f.getTime()>1e3*s.mOpts.maxValidDate)u=this.mOpts.theme+"_"+this.mOpts.disableGray,
g="2";else{if(g="0",f.getDate()==o&&f.getMonth()==c&&f.getFullYear()==l?1==this.mOpts.isTodayValid?u=this.mOpts.theme+"_"+this.mOpts.isToday:(u=this.mOpts.theme+"_"+this.mOpts.disableGray,g="2"):u="",!this.mOpts.weekendDis||6!=f.getDay()&&0!=f.getDay()||(u=this.mOpts.theme+"_"+this.mOpts.disableGray,g="3"),this.mOpts.disCertainDay&&this.mOpts.disCertainDay.length>0)for(var b in this.mOpts.disCertainDay)isNaN(this.mOpts.disCertainDay[b])||f.getDay()!==this.mOpts.disCertainDay[b]||(u=this.mOpts.theme+"_"+this.mOpts.disableGray,g="4");if(this.mOpts.disCertainDate&&this.mOpts.disCertainDate.length>0){var k=!1;for(var b in this.mOpts.disCertainDate)if(!isNaN(this.mOpts.disCertainDate[b])||isNaN(parseInt(this.mOpts.disCertainDate[b])))if(this.mOpts.disCertainDate[0]===!0){if(k=!(f.getDate()===this.mOpts.disCertainDate[b]),!k)break}else if(k=!(f.getDate()!==this.mOpts.disCertainDate[b]))break;k&&(u=this.mOpts.theme+"_"+this.mOpts.disableGray,g="4")}}0==f.getDay()&&(tr=document.createElement("tr")),td=document.createElement("td"),td.innerHTML=f.getDate(),""!=u&&$(td).attr("class",u),0==g&&(y=f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate(),$(td).attr("id",s.calendarId+"_"+y),$(td).css("cursor","pointer"),function(t){$(td).bind("click",t,function(){return s.selectDate(t),!1})}(y)),$(tr).append(td),6==f.getDay()&&$(D).append(tr)}return D},pickerDateRange.prototype.str2date=function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])},pickerDateRange.prototype.compareStrDate=function(t,e){var a=this.str2date(t),s=this.str2date(e);return a.getTime()>s.getTime()?1:a.getTime()==s.getTime()?0:-1},pickerDateRange.prototype.date2ymd=function(t){return[t.getFullYear(),t.getMonth()+1,t.getDate()]},pickerDateRange.prototype.changeInput=function(t){1==this.mOpts.isSingleDay&&(t=this.startDateId);var e=[this.startDateId,this.startCompareDateId,this.endDateId,this.endCompareDateId],a="";a=t==this.startDateId||t==this.endDateId?this.mOpts.theme+"_"+this.mOpts.selectCss:this.mOpts.theme+"_"+this.mOpts.compareCss,t==this.endDateId&&this.mOpts.singleCompare&&(a=this.mOpts.theme+"_"+this.mOpts.compareCss);for(var s in e)$("#"+e[s]).removeClass(this.mOpts.theme+"_"+this.mOpts.selectCss),$("#"+e[s]).removeClass(this.mOpts.theme+"_"+this.mOpts.compareCss);$("#"+t).addClass(a),$("#"+t).css("background-repeat","repeat"),this.dateInput=t},pickerDateRange.prototype.formatDate=function(t){return t.replace(/(\d{4})\-(\d{1,2})\-(\d{1,2})/g,function(t,e,a,s){return 10>a&&(a="0"+a),10>s&&(s="0"+s),e+"-"+a+"-"+s})};
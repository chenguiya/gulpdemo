define("test/post_recruit",[,"common","layer","kditor","js/module/layer/skin/layer.css"],function(a,e,t){"user strict";var i=a("layer"),c=a("common");a("kditor");a("js/module/layer/skin/layer.css");var r={};r.init=function(){var a,e=[],t=$(".createScope");KindEditor.ready(function(e){a=e.create('textarea[name="content"]',{basePath:homeUrl+"static/js/module/",themesPath:"../static/js/module/kditor/",langType:"../kditor/lang/zh_CN",resizeType:1,allowPreviewEmoticons:!1,allowImageUpload:!1,items:[]})}),$("#defined_btn").click(function(){var a='<div style="text-align:center; padding-right:20px; padding-top:55px;"><ul class="recruitDiv cl"><li><a href="javascript:void(0)" data-click="单行字设置,/admin/defined_field/add?formtype=text,570,470">单行字</a></li><li><a href="javascript:void(0)" data-click="多行字设置,/admin/defined_field/add?formtype=textarea,570,470">多行字</a></li><li><a href="javascript:void(0)" data-click="单选设置,/admin/defined_field/add?formtype=radio,570,570">单选</a></li><li><a href="javascript:void(0)" data-click="多选设置,/admin/defined_field/add?formtype=select,570,570">多选</a></li></ul></div>';c.layerShow({html:a,title:"添加需填写信息项",width:"540",height:"200",type:!0})});var i=$("#editAdd_type");i.on({click:function(){var a=$(this).attr("data-click").split(",");r.layer_show(a[0],a[1],a[2],a[3])}},".edit_define"),i.on({click:function(){var a=$(this),e=parseInt(a.closest(".edit_input").data("field"));$.ajax({type:"POST",url:homeUrl+"admin/defined_field/delete",data:{fieldid:e},cache:!1,dataTyep:"json",success:function(t){c.showmsg(t.message,"",1e3),a.closest(".edit_input").remove();var i=$("#fieldids").val().split(",");i.length<6&&$("#defined_btn").css("display","block");for(var r=0;r<i.length;r++)i[r]==e&&i.splice(r,1);$("#fieldids").val(i)},error:function(){c.showmsg("数据返回异常","",1e3)}})}},".close_defined");var d=$("#append_parent");d.on({click:function(){$(this).parents("#overpop").remove();var a=$(this).attr("data-click").split(",");r.layer_show(a[0],a[1],a[2],a[3])}},"a"),t.on({click:function(){var a=$(this).find("img").attr("src"),i=$(this).attr("id");if(t.find(".Li_draggable").removeClass("activer"),$(this).addClass("activer"),!t.find(".pageCreatNum p").hasClass("activer"))return!1;t.find(".pageCreatNum p.activer").attr("data-id",i),t.find(".pageCreatNum p.activer").attr("data-image",a);var c=parseInt(t.find(".pageCreatNum p.activer").attr("data-tid"));1==c?r.Oneclick(t,a):2==c?r.Twoclick(t,a):3==c&&r.Threeclick(t,a),t.find(".pageCreatNum p").each(function(a){e[a]=$(this).attr("data-id")}),$("#templateid").val(e)}},".Li_draggable"),t.on({click:function(){var a=$(this),e=["一","二","三"],i=$(".pageCreatNum p").length,c='<p class="activer" data-tid="'+(i+1)+'" data-id="0" data-image=""><a href="javascript:;" class="pageIc" >第'+e[i]+'屏</a><a href="javascript:;" class="trash_Icon"></a></p>';a.parent(".add_pagedrage").prev().find("p").removeClass("activer"),$(".pageCreatNum").append(c),t.find(".compText").html(""),t.find(".Li_draggable").removeClass("activer"),i++,i>2&&a.parent(".add_pagedrage").remove()}},".add_pagedrage .pageIc"),t.on({click:function(){t.find(".pageCreatNum p").removeClass("activer"),$(this).parent("p").addClass("activer");var a=($(this).parent().attr("data-id"),$(this).parent().attr("data-image")),e=parseInt($(this).parent().attr("data-tid"));t.find(".Li_draggable").removeClass("activer"),""!==a?1==e?r.Oneclick(t,a):2==e?r.Twoclick(t,a):3==e&&r.Threeclick(t,a):t.find(".compText").html("")}},".pageCreatNum .pageIc"),t.on({click:function(){var a=$(this).parent("p").attr("data-id");""==a?c.showmsg("背景还没添加哦！"):(t.find(".compText").html(""),$(this).parent("p").attr("data-id",""),$(this).parent("p").attr("data-image",""),t.find(".pageCreatNum p").each(function(a){e[a]=$(this).attr("data-id")}),$("#templateid").val(e))}},".trash_Icon")},r.Oneclick=function(a,e){var t=$("#title").val(),i='<div class="compRizeOne"><img src="'+e+'"><div class="comOne"><p class="logo"><img src="'+config.fans_logo+'"></p><p class="ruit-name">'+config.fans_name+'</p><p class="ruit-title"><img src="/static/images/wap/titleBG_rec.png"><span>'+t+'</span></p><p class="ruit-join">加入</p></div></div>';a.find(".compText").html(i)},r.Twoclick=function(a,e){var t=[];$(".malCod").each(function(a){$(this).is(":checked")&&t.push($(this).parent().next().text())});var i='<div class="compRizeTwo">';i+='<img src="'+e+'">',i+='<div class="Twotable">',i+='<p class="tow-name">欢迎加入<br />'+config.fans_name+"</p>",i+='<div class="comTwo">';for(var c=0;c<t.length;c++)i+='<p class="Twoinput"><label>'+t[c]+'</label><input type="text" name="name" value=""></p>';i+="</div>",i+="</div>",i+='<p class="two-submit">提交</p>',i+="</div>",a.find(".compText").html(i)},r.Threeclick=function(a,e){var t='<div class="compRizeThree"><img src="'+e+'"><div class="comThree"><p class="ster">恭喜您申请成功！</p><p class="follow">关注“'+config.fans_name+'”服务号第一时间接收球迷会通知</p><p class="code"><img src="/static/images/app_code.png"></p></div></div>';a.find(".compText").html(t)},r.layer_show=function(a,e,t,c){(null==a||""==a)&&(a=!1),(null==e||""==e)&&(e="404.html"),(null==t||""==t)&&(t=800),(null==c||""==c)&&(c=$(window).height()-50),i.open({type:2,area:[t+"px",c+"px"],fix:!1,maxmin:!0,scrollbar:!1,shade:.4,title:a,content:e})},t.exports=r});
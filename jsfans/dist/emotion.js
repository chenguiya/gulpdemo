define(function(e,t,n){var i=e("jquery");i.fn.qqFace=function(e){var t={id:"facebox",path:"face/",assign:"content",tip:"em_"},n=i.extend(t,e),o=i("#"+n.assign),a=n.id,c=n.path,s=n.tip;return o.length<=0?(alert("缺少表情赋值对象。"),!1):(i(this).click(function(e){var t,o;if(i("#"+a).length<=0){t='<div id="'+a+'" style="position:absolute;display:none;z-index:1000;" class="qqFace"><table border="0" cellspacing="0" cellpadding="0"><tr>';for(var l=1;75>=l;l++)o="["+s+l+"]",t+='<td><img src="'+c+l+'.gif" onclick="$(\'#'+n.assign+"').insertAtCaret('"+o+"');\" /></td>",l%15==0&&(t+="</tr><tr>");t+="</tr></table></div>"}i(this).parent().append(t);var r=i(this).position(),d=r.top+i(this).outerHeight();i("#"+a).css("top",d),i("#"+a).css("left",r.left),i("#"+a).show(),e.stopPropagation()}),void i(document).click(function(){i("#"+a).hide(),i("#"+a).remove()}))},jQuery.extend({unselectContents:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}})}),jQuery.fn.extend({selectContents:function(){$(this).each(function(e){var t,n,i,o,a=this;(i=a.ownerDocument)&&(o=i.defaultView)&&"undefined"!=typeof o.getSelection&&"undefined"!=typeof i.createRange&&(t=window.getSelection())&&"undefined"!=typeof t.removeAllRanges?(n=i.createRange(),n.selectNode(a),0==e&&t.removeAllRanges(),t.addRange(n)):document.body&&"undefined"!=typeof document.body.createTextRange&&(n=document.body.createTextRange())&&(n.moveToElementText(a),n.select())})},setCaret:function(){if($.browser.msie){var e=function(){var e=$(this).get(0);e.caretPos=document.selection.createRange().duplicate()};$(this).click(e).select(e).keyup(e)}},insertAtCaret:function(e){var t=$(this).get(0);if(document.all&&t.createTextRange&&t.caretPos){var n=t.caretPos;n.text=""==n.text.charAt(n.text.length-1)?e+"":e}else if(t.setSelectionRange){var i=t.selectionStart,o=t.selectionEnd,a=t.value.substring(0,i),c=t.value.substring(o);t.value=a+e+c,t.focus();var s=e.length;t.setSelectionRange(i+s,i+s),t.blur()}else t.value+=e}});